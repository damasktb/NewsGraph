<?xml version='1.0' encoding='ISO-8859-1'?>
<!DOCTYPE html>
<html>
  <head>
    <title>NewsGraph</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.0/css/materialize.min.css" type="text/css" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" type="text/css" rel="stylesheet"/>
    <script src="http://d3js.org/d3.v2.min.js?2.9.6"></script>
    <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
    <script src="http://code.jquery.com/ui/1.11.0/jquery-ui.min.js"></script>
    <style>body {
	overflow: none;
}

.header {
 padding: 5px;
 font-size: 2em;
}

h4 {
	font-size: 1.5em !important;
}

.nav-wrapper {
	z-index: 999 !important;
 	position: relative;
 	box-shadow: none;
}

.nav-wrapper:before {
    position: absolute;
    left: 0px;
    top: 0px;
    right: 0px;
    bottom: 0px;
    box-shadow: 0 2px 5px 0 rgba(0,0,0,0.16), 0 2px 10px 0 rgba(0,0,0,0.12);
    pointer-events: none;
    content:"";
}

.node circle {
 stroke: #000;
 stroke-width: 4px;
}

.link {
  fill: none;
  stroke-width: 7px;
}

.search {
	position: absolute;
	top: 150px;
	text-align: middle;
}

#searchbox {
	display: inline-block;
}

#searchbutton {
	display: inline-block;
}

.card {
	margin: 10px;
}

.card img {
	height: 200px;
}

#cards {
	margin-top: 20px;
	overflow: scroll;
}

.card-title {
	font-size: 1.4em !important;
	line-height: 1.2em !important;
}

#graph {
	margin: 0px;
	border: 0px;
	overflow: none;
}

#article-container {
	position: fixed;
	z-index: 1 !important;
	top: 0px;
	bottom: 0px;
	right: 0px;
	width: 30%;	
	padding: 10px;
	padding-top: 70px;							
    background: #eff0f1;	
    border: 0px;
    margin:0px;	
    box-shadow: -2px 2px 5px 0 rgba(0,0,0,0.16), -2px 2px 10px 0 rgba(0,0,0,0.12);
    overflow: scroll;
    display: none;
}

#article-container img {
	overflow: none;
}

#article-container h1 {
	font-size: 2em;
	line-height: 110%;
}

#article-container h2 {
	font-size: 1.2em;
	font-style: italic;
}

img.js-image-replace {
	height: inherit !important;
	width: inherit !important;

}
</style>
  </head>
  <body>
    <nav>
      <div class="nav-wrapper yellow darken-3">
        <span class="brand-logo center">NewsGraph</span>
        <ul id="nav-mobile" class="right hide-on-med-and-down">
<!--           <li id="graphPane" class="active">
            <a href="#">Graph</a>
          </li> -->
          <li id="feedPane">
            <a href="#">Feed</a>
          </li>
        </ul>
      </div>
    </nav>
    <div id="cards">
      <div class="card horizontal Sean-Spicer">
        <div class="card-image">
          <img src="https://i.guim.co.uk/img/media/62990f6d3a2d3c035dd531526fca6b50880356dd/0_50_5900_3541/master/5900.jpg?w=1200&amp;h=630&amp;q=55&amp;auto=format&amp;usm=12&amp;fit=crop&amp;crop=faces%2Centropy&amp;bm=normal&amp;ba=bottom%2Cleft&amp;blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&amp;s=5a8b1148465661cebd11e12374ffc18e"/>
        </div>
        <div class="card-stacked">
          <div class="card-content">
            <h4>President &#8216;pulled out every stop&#8217; to pass healthcare bill, Spicer says &#8211; video</h4>
            <p>The White House said on Friday that Donald Trump had done all he could to pass the Obamacare replacement, amid signs the measure might not pass</p>
          </div>
          <div class="card-action">Fri Mar 24 19:05:19 2017 - <a href="/#">Read more at US news | The Guardian</a></div>
        </div>
      </div>
      <div class="card horizontal New-York">
        <div class="card-image">
          <img src="https://i.guim.co.uk/img/media/feac0be29089668c999780fc96e1c6ec9d61b97d/0_117_3500_2101/master/3500.jpg?w=1200&amp;h=630&amp;q=55&amp;auto=format&amp;usm=12&amp;fit=crop&amp;crop=faces%2Centropy&amp;bm=normal&amp;ba=bottom%2Cleft&amp;blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&amp;s=663eaabf51d6f5b532900d35a4111b28"/>
        </div>
        <div class="card-stacked">
          <div class="card-content">
            <h4>The week in patriarchy: who needs prenatal and newborn care, anyway?</h4>
            <p>These benefits are optional in the Republicans&#8217; world. That&#8217;s what happens when the conservatives&#8217; disregard for women and healthcare meet</p>
          </div>
          <div class="card-action">Fri Mar 24 18:15:14 2017 - <a href="/#">Read more at US news | The Guardian</a></div>
        </div>
      </div>
      <div class="card horizontal Senate">
        <div class="card-image">
          <img src="https://i.guim.co.uk/img/media/b3aafcfa7a19b71f985571b32c8bce943c5d62d5/0_220_3000_1800/master/3000.jpg?w=1200&amp;h=630&amp;q=55&amp;auto=format&amp;usm=12&amp;fit=crop&amp;crop=faces%2Centropy&amp;bm=normal&amp;ba=bottom%2Cleft&amp;blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&amp;s=1d347a545b31f796725d5bbab4090199"/>
        </div>
        <div class="card-stacked">
          <div class="card-content">
            <h4>Roger Stone calls Trump-Russia inquiry 'a scandal in search of evidence'</h4>
            <p>Confidant of president says he has not heard back from House intelligence committee as ranking Democrat Adam Schiff questions conduct of Republican chair</p>
          </div>
          <div class="card-action">Sun Mar 26 18:28:07 2017 - <a href="/#">Read more at US news | The Guardian</a></div>
        </div>
      </div>
      <div class="card horizontal California">
        <div class="card-image">
          <img src="https://i.guim.co.uk/img/media/ddf1d9149810230dc471422194fd6bb779cde881/0_16_2400_1440/master/2400.jpg?w=1200&amp;h=630&amp;q=55&amp;auto=format&amp;usm=12&amp;fit=crop&amp;crop=faces%2Centropy&amp;bm=normal&amp;ba=bottom%2Cleft&amp;blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&amp;s=8bb496ac0c0eb9625a04846d2b8aa556"/>
        </div>
        <div class="card-stacked">
          <div class="card-content">
            <h4>Fights break out at pro-Trump rally in California &#8211; video</h4>
            <p>President Trump supporters clash with counter-protesters at a rally on a popular Californian beach</p>
          </div>
          <div class="card-action">Sun Mar 26 10:10:21 2017 - <a href="/#">Read more at US news | The Guardian</a></div>
        </div>
      </div>
      <div class="card horizontal Florida">
        <div class="card-image">
          <img src="https://i.guim.co.uk/img/media/19f7e375165aa4b84641b5fccf3c7305f534041d/0_200_3454_2073/master/3454.jpg?w=1200&amp;h=630&amp;q=55&amp;auto=format&amp;usm=12&amp;fit=crop&amp;crop=faces%2Centropy&amp;bm=normal&amp;ba=bottom%2Cleft&amp;blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&amp;s=a85f4885af110d0725641bee2c9c22d6"/>
        </div>
        <div class="card-stacked">
          <div class="card-content">
            <h4>UK retail sales surge as consumers shrug off Brexit fears - as it happened</h4>
            <p>Retail sales rose by a stronger-than-expected 1.4% in February as UK consumers took Brexit and rising inflation in their stride</p>
          </div>
          <div class="card-action">Thu Mar 23 15:12:10 2017 - <a href="/#">Read more at US news | The Guardian</a></div>
        </div>
      </div>
      <div class="card horizontal Florida">
        <div class="card-image">
          <img src="https://i.guim.co.uk/img/media/38cc459fd8c80e857bda03ff65c780f0de25a5ca/0_136_2970_1783/master/2970.jpg?w=1200&amp;h=630&amp;q=55&amp;auto=format&amp;usm=12&amp;fit=crop&amp;crop=faces%2Centropy&amp;bm=normal&amp;ba=bottom%2Cleft&amp;blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&amp;s=cecffaa49c09c7e65f6872553c0b2cfc"/>
        </div>
        <div class="card-stacked">
          <div class="card-content">
            <h4>NCAA Tournament: South Carolina reach first Final Four as UNC beat Kentucky</h4>
            <p>Sindarius Thornwell scored 26 points and South Carolina earned its first trip to the Final Four with a 77-70 victory over Florida</p>
          </div>
          <div class="card-action">Sun Mar 26 21:09:50 2017 - <a href="/#">Read more at US news | The Guardian</a></div>
        </div>
      </div>
      <div class="card horizontal New-York">
        <div class="card-image">
          <img src="https://i.guim.co.uk/img/media/0218e98592dab5ac5a74e16ad591f98c04c61a5f/0_0_640_384/master/640.jpg?w=1200&amp;h=630&amp;q=55&amp;auto=format&amp;usm=12&amp;fit=crop&amp;crop=faces%2Centropy&amp;bm=normal&amp;ba=bottom%2Cleft&amp;blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&amp;s=6ac6046a462058bbf321d7f033e69187"/>
        </div>
        <div class="card-stacked">
          <div class="card-content">
            <h4>Joe Biden: I regret not running for president &#8211; because I could have won</h4>
            <p>Former vice-president tells college students in New York &#8216;I don&#8217;t have a lot of hope right now&#8217; about Donald Trump&#8217;s administration</p>
          </div>
          <div class="card-action">Sun Mar 26 16:18:08 2017 - <a href="/#">Read more at US news | The Guardian</a></div>
        </div>
      </div>
      <div class="card horizontal Obamacare Democrats">
        <div class="card-image">
          <img src="https://i.guim.co.uk/img/media/ba43fe3133c8eb1a16f3c93e80a05c223afe34c2/0_217_3490_2094/master/3490.jpg?w=1200&amp;h=630&amp;q=55&amp;auto=format&amp;usm=12&amp;fit=crop&amp;crop=faces%2Centropy&amp;bm=normal&amp;ba=bottom%2Cleft&amp;blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&amp;s=3ec7665a02308110e3ed5653c74af262"/>
        </div>
        <div class="card-stacked">
          <div class="card-content">
            <h4>The showdown that exposed the rift between Republican ideology and reality</h4>
            <p>Republicans calling for a return to the pro-business government of the 1920s never reflected political reality &#8211; and now the party can never be the same</p>
          </div>
          <div class="card-action">Sun Mar 26 00:15:16 2017 - <a href="/#">Read more at US news | The Guardian</a></div>
        </div>
      </div>
      <div class="card horizontal Senate Sean-Spicer Democrats Barack-Obama">
        <div class="card-image">
          <img src="https://i.guim.co.uk/img/media/6445bfeffdcf1bb6a4b5f411bcc570fef54f6829/0_135_4500_2700/master/4500.jpg?w=1200&amp;h=630&amp;q=55&amp;auto=format&amp;usm=12&amp;fit=crop&amp;crop=faces%2Centropy&amp;bm=normal&amp;ba=bottom%2Cleft&amp;blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&amp;s=326a3abe409b4114179effd3aee9bd24"/>
        </div>
        <div class="card-stacked">
          <div class="card-content">
            <h4>&#8216;Move fast and break things&#8217;: Trump&#8217;s Obamacare failure and the backlash ahead</h4>
            <p>Republicans suffered a devastating defeat on Obamacare. But the pulling of the American Health Care Act could be a &#8216;blessing in disguise&#8217; for Trump</p>
          </div>
          <div class="card-action">Sat Mar 25 17:42:43 2017 - <a href="/#">Read more at US news | The Guardian</a></div>
        </div>
      </div>
      <div class="card horizontal Barack-Obama">
        <div class="card-image">
          <img src="https://i.guim.co.uk/img/media/5e28bf6cdeb5daa087d4000042c70b55d33b2ed9/0_94_4500_2700/master/4500.jpg?w=1200&amp;h=630&amp;q=55&amp;auto=format&amp;usm=12&amp;fit=crop&amp;crop=faces%2Centropy&amp;bm=normal&amp;ba=bottom%2Cleft&amp;blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&amp;s=893367b575b1ff2fb7058140ecc02b9a"/>
        </div>
        <div class="card-stacked">
          <div class="card-content">
            <h4>Trump must convert surging US confidence into real growth</h4>
            <p>The exuberant market reaction to his win has not been translated into progress &#8211; he must work with Congress to deliver</p>
          </div>
          <div class="card-action">Mon Mar 20 20:09:50 2017 - <a href="/#">Read more at US news | The Guardian</a></div>
        </div>
      </div>
      <div class="card horizontal Senate">
        <div class="card-image">
          <img src="https://i.guim.co.uk/img/media/d4c26509df6ae3e016d5616f55d1688d0f4a0ba0/0_0_4935_2960/master/4935.jpg?w=1200&amp;h=630&amp;q=55&amp;auto=format&amp;usm=12&amp;fit=crop&amp;crop=faces%2Centropy&amp;bm=normal&amp;ba=bottom%2Cleft&amp;blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&amp;s=db1afe83a66c75990aea0bf3ffcbac3b"/>
        </div>
        <div class="card-stacked">
          <div class="card-content">
            <h4>Lawmaker's 'peculiar midnight run' endangers Trump-Russia inquiry</h4>
            <p>House intelligence chair Devin Nunes reportedly disappeared from Uber ride, fueling further questions over his role in committee&#8217;s investigation</p>
          </div>
          <div class="card-action">Sun Mar 26 15:36:35 2017 - <a href="/#">Read more at US news | The Guardian</a></div>
        </div>
      </div>
      <div class="card horizontal Senate Obamacare Sean-Spicer">
        <div class="card-image">
          <img src="https://i.guim.co.uk/img/media/44b6c2841b0376970060d90d26f089687a495532/0_153_2622_1573/master/2622.jpg?w=1200&amp;h=630&amp;q=55&amp;auto=format&amp;usm=12&amp;fit=crop&amp;crop=faces%2Centropy&amp;bm=normal&amp;ba=bottom%2Cleft&amp;blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&amp;s=4f09845d3e0023ec142a2a4e0290212e"/>
        </div>
        <div class="card-stacked">
          <div class="card-content">
            <h4>Make-or-break day for Donald Trump's healthcare gamble</h4>
            <p>US president plays hardball with Congress by threatening to walk away from repealing Obamacare if the House fails to pass his healthcare bill</p>
          </div>
          <div class="card-action">Fri Mar 24 10:17:48 2017 - <a href="/#">Read more at US news | The Guardian</a></div>
        </div>
      </div>
      <div class="card horizontal Florida">
        <div class="card-image">
          <img src="https://i.guim.co.uk/img/media/dcf7e43ac590462d9c12ba26ac285053e0bf81e5/39_0_876_526/master/876.jpg?w=1200&amp;h=630&amp;q=55&amp;auto=format&amp;usm=12&amp;fit=crop&amp;crop=faces%2Centropy&amp;bm=normal&amp;ba=bottom%2Cleft&amp;blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&amp;s=4128edcf5e4525d0e0737ca62d7dda5d"/>
        </div>
        <div class="card-stacked">
          <div class="card-content">
            <h4>Former IndyCar and Nascar driver David Steele killed during Florida race</h4>
            <p>Sprint car veteran David Steele has died during a race in Florida after his car struck a retaining wall</p>
          </div>
          <div class="card-action">Sun Mar 26 15:47:22 2017 - <a href="/#">Read more at US news | The Guardian</a></div>
        </div>
      </div>
      <div class="card horizontal Obamacare Democrats">
        <div class="card-image">
          <img src="https://i.guim.co.uk/img/media/87bf7c03c68ec897295622c3735d8053b31b8a96/0_0_1800_1080/master/1800.png?w=1200&amp;h=630&amp;q=55&amp;auto=format&amp;usm=12&amp;fit=crop&amp;crop=faces%2Centropy&amp;bm=normal&amp;ba=bottom%2Cleft&amp;blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&amp;s=d7f5262fb986435a739aeface5a9e145"/>
        </div>
        <div class="card-stacked">
          <div class="card-content">
            <h4>Donald Trump lambasts Democrats as Obamacare replacement bill pulled &#8211; video</h4>
            <p>Trump says Democrats, including Nancy Pelosi, to blame after Republicans pull House bill meant to replace Affordable Care Act</p>
          </div>
          <div class="card-action">Sat Mar 25 03:36:47 2017 - <a href="/#">Read more at US news | The Guardian</a></div>
        </div>
      </div>
      <div class="card horizontal New-York">
        <div class="card-image">
          <img src="https://i.guim.co.uk/img/media/4b1cf221971ee251a0083f1cc0cedf0d0eb0ec41/0_219_4930_2959/master/4930.jpg?w=1200&amp;h=630&amp;q=55&amp;auto=format&amp;usm=12&amp;fit=crop&amp;crop=faces%2Centropy&amp;bm=normal&amp;ba=bottom%2Cleft&amp;blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&amp;s=c7c19dfbeb7632e91b5e20f50f5592d3"/>
        </div>
        <div class="card-stacked">
          <div class="card-content">
            <h4>Nervous markets take fright at prospect of Trump failing to deliver</h4>
            <p>US shares fell &#8211; with a knock-on effect elsewhere &#8211; as the new administration struggles to follow through on spending and tax cuts promises</p>
          </div>
          <div class="card-action">Wed Mar 22 18:21:57 2017 - <a href="/#">Read more at US news | The Guardian</a></div>
        </div>
      </div>
      <div class="card horizontal Obamacare">
        <div class="card-image">
          <img src="https://i.guim.co.uk/img/media/a11fdcabc72a3840df1d87dd89b5a7e8b1d3aca9/0_75_2906_1744/master/2906.jpg?w=1200&amp;h=630&amp;q=55&amp;auto=format&amp;usm=12&amp;fit=crop&amp;crop=faces%2Centropy&amp;bm=normal&amp;ba=bottom%2Cleft&amp;blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&amp;s=f231d3a012db4cf225ecb5238f4ba089"/>
        </div>
        <div class="card-stacked">
          <div class="card-content">
            <h4>Paul Ryan on failed healthcare bill: 'This is a disappointing day&#8217; &#8211; video</h4>
            <p>A crestfallen Paul Ryan admitted Republicans &#8216;came up short&#8217; in their efforts to overhaul the US healthcare system on Friday</p>
          </div>
          <div class="card-action">Fri Mar 24 21:32:35 2017 - <a href="/#">Read more at US news | The Guardian</a></div>
        </div>
      </div>
      <div class="card horizontal Barack-Obama">
        <div class="card-image">
          <img src="https://i.guim.co.uk/img/media/feaa9aa18b4ffe13be6ab9d488100afffd92a605/0_21_3500_2100/master/3500.jpg?w=1200&amp;h=630&amp;q=55&amp;auto=format&amp;usm=12&amp;fit=crop&amp;crop=faces%2Centropy&amp;bm=normal&amp;ba=bottom%2Cleft&amp;blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&amp;s=82c63052ae8de1135718518c76d7a4a8"/>
        </div>
        <div class="card-stacked">
          <div class="card-content">
            <h4>Trump to sign executive order undoing Obama's clean power plan</h4>
            <p>EPA head Scott Pruitt, who sued to halt plan as Oklahoma&#8217;s AG, claims ending restrictions on coal power plants will be &#8216;pro-growth and pro-environment&#8217;</p>
          </div>
          <div class="card-action">Sun Mar 26 19:59:46 2017 - <a href="/#">Read more at US news | The Guardian</a></div>
        </div>
      </div>
      <div class="card horizontal Obamacare New-York">
        <div class="card-image">
          <img src="https://i.guim.co.uk/img/media/b3d89a3b5d7b833d941acd50b982178f35105bd6/0_457_4032_2419/master/4032.jpg?w=1200&amp;h=630&amp;q=55&amp;auto=format&amp;usm=12&amp;fit=crop&amp;crop=faces%2Centropy&amp;bm=normal&amp;ba=bottom%2Cleft&amp;blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&amp;s=f6f7e54c03fcc553460eb853093d5122"/>
        </div>
        <div class="card-stacked">
          <div class="card-content">
            <h4>'He's a street fighter': Trump fans rally after heavy blow on healthcare</h4>
            <p>In New York, supporters said the president was far from down and out despite failure on Obamacare and an FBI probe into alleged Russia ties</p>
          </div>
          <div class="card-action">Sat Mar 25 22:49:20 2017 - <a href="/#">Read more at US news | The Guardian</a></div>
        </div>
      </div>
      <div class="card horizontal Florida">
        <div class="card-image">
          <img src="https://i.guim.co.uk/img/media/000dd49990629707ea7f9c6c4deb2371dcf8a414/0_41_4579_2747/master/4579.jpg?w=1200&amp;h=630&amp;q=55&amp;auto=format&amp;usm=12&amp;fit=crop&amp;crop=faces%2Centropy&amp;bm=normal&amp;ba=bottom%2Cleft&amp;blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&amp;s=14a4a31f2fc21a0a4ad10beef65b6d74"/>
        </div>
        <div class="card-stacked">
          <div class="card-content">
            <h4>Chris Chiozza nails three-pointer at OT buzzer to lead Florida past Wisconsin</h4>
            <p>Chiozza drops in the winner to send Gators into the Elite Eight, where they&#8217;ll plat South Carolina in an all-SEC regional final in New York</p>
          </div>
          <div class="card-action">Sat Mar 25 05:44:25 2017 - <a href="/#">Read more at US news | The Guardian</a></div>
        </div>
      </div>
      <div class="card horizontal California">
        <div class="card-image">
          <img src="https://i.guim.co.uk/img/media/b88cbdee5b382c1c733bec5416f6e9dc34e09fcc/0_86_2400_1440/master/2400.jpg?w=1200&amp;h=630&amp;q=55&amp;auto=format&amp;usm=12&amp;fit=crop&amp;crop=faces%2Centropy&amp;bm=normal&amp;ba=bottom%2Cleft&amp;blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&amp;s=f849e0dd8019c45a02db46a9b75d4230"/>
        </div>
        <div class="card-stacked">
          <div class="card-content">
            <h4>Fights erupt at pro-Donald Trump rally on California beach</h4>
            <p>At least one demonstrator is doused with pepper spray as anti-Trump protesters clash with the US president&#8217;s supporters</p>
          </div>
          <div class="card-action">Sun Mar 26 01:56:53 2017 - <a href="/#">Read more at US news | The Guardian</a></div>
        </div>
      </div>
      <div class="card horizontal Senate">
        <div class="card-image">
          <img src="https://i.guim.co.uk/img/media/d965dbcff31844d6ecfc2a8dea21567b81277875/0_156_4500_2699/master/4500.jpg?w=1200&amp;h=630&amp;q=55&amp;auto=format&amp;usm=12&amp;fit=crop&amp;crop=faces%2Centropy&amp;bm=normal&amp;ba=bottom%2Cleft&amp;blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&amp;s=23b079d72ef0a46f19dbee627549f317"/>
        </div>
        <div class="card-stacked">
          <div class="card-content">
            <h4>Trump blames everyone but himself for failure of GOP healthcare legislation</h4>
            <p>President&#8217;s targets include conservatives, Democrats and a possible veiled jab at Paul Ryan as Republican hand-wringing over repeal-and-replace failure continues</p>
          </div>
          <div class="card-action">Sun Mar 26 16:50:37 2017 - <a href="/#">Read more at US news | The Guardian</a></div>
        </div>
      </div>
      <div class="card horizontal New-York">
        <div class="card-image">
          <img src="https://i.guim.co.uk/img/media/fcc8bd4e8804502e5a07964ef4f63f53109d83e2/0_102_3000_1800/master/3000.jpg?w=1200&amp;h=630&amp;q=55&amp;auto=format&amp;usm=12&amp;fit=crop&amp;crop=faces%2Centropy&amp;bm=normal&amp;ba=bottom%2Cleft&amp;blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&amp;s=aff5014d28a1b68f23694372f920865a"/>
        </div>
        <div class="card-stacked">
          <div class="card-content">
            <h4>David Rockefeller obituary</h4>
            <p>Chairman of Chase Manhattan bank and one of the US&#8217;s leading philanthropists</p>
          </div>
          <div class="card-action">Sun Mar 26 12:51:25 2017 - <a href="/#">Read more at US news | The Guardian</a></div>
        </div>
      </div>
      <div class="card horizontal New-York">
        <div class="card-image">
          <img src="https://i.guim.co.uk/img/media/6971e12f754c9f5a105ab5e6da3c60a879d189ea/0_61_3888_2332/master/3888.jpg?w=1200&amp;h=630&amp;q=55&amp;auto=format&amp;usm=12&amp;fit=crop&amp;crop=faces%2Centropy&amp;bm=normal&amp;ba=bottom%2Cleft&amp;blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&amp;s=4ba81b81cad43ccdc3eaf89795fbf789"/>
        </div>
        <div class="card-stacked">
          <div class="card-content">
            <h4>Joe Biden: &#8216;Do I regret not being president? Yes.&#8217; &#8211; video</h4>
            <p>Former vice-president Joe Biden says he regrets not being president, despite making the right decision not to run for office</p>
          </div>
          <div class="card-action">Sun Mar 26 16:10:40 2017 - <a href="/#">Read more at US news | The Guardian</a></div>
        </div>
      </div>
      <div class="card horizontal Obamacare">
        <div class="card-image">
          <img src="https://i.guim.co.uk/img/media/927172769945233082259e1f65b30d635147fc33/0_193_3500_2099/master/3500.jpg?w=1200&amp;h=630&amp;q=55&amp;auto=format&amp;usm=12&amp;fit=crop&amp;crop=faces%2Centropy&amp;bm=normal&amp;ba=bottom%2Cleft&amp;blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&amp;s=d446e5d314a02f6ef71f4344d9d2bfb9"/>
        </div>
        <div class="card-stacked">
          <div class="card-content">
            <h4>The Guardian view on Trump and Obamacare: a welcome failure for a damaging plan</h4>
            <p>Editorial: In spite of controlling the White House and both wings of Congress, the Republicans allowed ideological obsessions to derail a plan they have been trumpeting for years</p>
          </div>
          <div class="card-action">Sun Mar 26 18:34:26 2017 - <a href="/#">Read more at US news | The Guardian</a></div>
        </div>
      </div>
      <div class="card horizontal Senate">
        <div class="card-image">
          <img src="https://i.guim.co.uk/img/media/6e1b07ca29f95324a6f47574f13845cae7e764cc/95_0_3355_2013/master/3355.jpg?w=1200&amp;h=630&amp;q=55&amp;auto=format&amp;usm=12&amp;fit=crop&amp;crop=faces%2Centropy&amp;bm=normal&amp;ba=bottom%2Cleft&amp;blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&amp;s=508dc2c83ccd1762b8b169c1db08335e"/>
        </div>
        <div class="card-stacked">
          <div class="card-content">
            <h4>Neil Gorsuch's confirmation hearing revealed his hidden similarity to Trump</h4>
            <p>The two appear to be a study in contrasts &#8211; but both display a remarkable lack of compassion. Their likeness could serve to justify Democrats&#8217; opposition</p>
          </div>
          <div class="card-action">Sat Mar 25 11:00:00 2017 - <a href="/#">Read more at US news | The Guardian</a></div>
        </div>
      </div>
      <div class="card horizontal Obamacare">
        <div class="card-image">
          <img src="https://i.guim.co.uk/img/media/e2705cc4305b4157131478bfd26cdee22b6b3bf0/39_246_2421_1452/master/2421.jpg?w=1200&amp;h=630&amp;q=55&amp;auto=format&amp;usm=12&amp;fit=crop&amp;crop=faces%2Centropy&amp;bm=normal&amp;ba=bottom%2Cleft&amp;blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&amp;s=d991455cdd107d167b31fb2b319bc201"/>
        </div>
        <div class="card-stacked">
          <div class="card-content">
            <h4>Wall Street&#8217;s love affair with Trump cools as healthcare bill sows welcome doubts</h4>
            <p>US president&#8217;s failure to win backing for his repeal of Obamacare has delivered a dose of reality to the markets</p>
          </div>
          <div class="card-action">Sun Mar 26 07:02:24 2017 - <a href="/#">Read more at US news | The Guardian</a></div>
        </div>
      </div>
      <div class="card horizontal Florida">
        <div class="card-image">
          <img src="https://i.guim.co.uk/img/media/5941478f1951db1e43c0232664ff21726d6e8509/0_39_5191_3115/master/5191.jpg?w=1200&amp;h=630&amp;q=55&amp;auto=format&amp;usm=12&amp;fit=crop&amp;crop=faces%2Centropy&amp;bm=normal&amp;ba=bottom%2Cleft&amp;blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&amp;s=10abfd401b07baef08eec723f6823881"/>
        </div>
        <div class="card-stacked">
          <div class="card-content">
            <h4>Sunshine state shuns solar as overcast New York basks in clean energy boom</h4>
            <p>Despite its natural advantages, disincentives mean Florida has few solar panels but the Empire state&#8217;s policies have boosted installed solar capacity by 800%</p>
          </div>
          <div class="card-action">Mon Mar 27 07:00:00 2017 - <a href="/#">Read more at US news | The Guardian</a></div>
        </div>
      </div>
      <div class="card horizontal Obamacare Democrats">
        <div class="card-image">
          <img src="https://i.guim.co.uk/img/media/f1eb553720eec58eaae91b26bed8c2b0ab969295/0_60_3500_2100/master/3500.jpg?w=1200&amp;h=630&amp;q=55&amp;auto=format&amp;usm=12&amp;fit=crop&amp;crop=faces%2Centropy&amp;bm=normal&amp;ba=bottom%2Cleft&amp;blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&amp;s=c81c7d6ae8cb75e923c2d7f62dc45a76"/>
        </div>
        <div class="card-stacked">
          <div class="card-content">
            <h4>Donald Trump blames Democrats for stunning failure to repeal Obamacare</h4>
            <p>Weeks of negotiations over American Health Care Act fail to build a GOP consensus, forcing president to pull legislation from House vote</p>
          </div>
          <div class="card-action">Sat Mar 25 10:13:46 2017 - <a href="/#">Read more at US news | The Guardian</a></div>
        </div>
      </div>
      <div class="card horizontal Senate">
        <div class="card-image">
          <img src="https://i.guim.co.uk/img/media/9ddffc13603b5f4ddf257fe4c8e7023f323bb208/443_408_2597_1558/master/2597.jpg?w=1200&amp;h=630&amp;q=55&amp;auto=format&amp;usm=12&amp;fit=crop&amp;crop=faces%2Centropy&amp;bm=normal&amp;ba=bottom%2Cleft&amp;blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&amp;s=801ff9584538b215f40582694a8b1521"/>
        </div>
        <div class="card-stacked">
          <div class="card-content">
            <h4>Will Trump be impeached &#8211; or is it just a liberal fantasy?</h4>
            <p>Only two presidents in history have been impeached, but murmurs continue to surround Trump. Here&#8217;s how the process would work &#8211; if it would at all</p>
          </div>
          <div class="card-action">Wed Mar 22 07:30:19 2017 - <a href="/#">Read more at US news | The Guardian</a></div>
        </div>
      </div>
      <div class="card horizontal Senate Obamacare">
        <div class="card-image">
          <img src="https://i.guim.co.uk/img/media/7cb78c6397ac1df649834acfee24b609628a144a/0_86_4500_2699/master/4500.jpg?w=1200&amp;h=630&amp;q=55&amp;auto=format&amp;usm=12&amp;fit=crop&amp;crop=faces%2Centropy&amp;bm=normal&amp;ba=bottom%2Cleft&amp;blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&amp;s=5bc27b6ff0526da54342971a099a429a"/>
        </div>
        <div class="card-stacked">
          <div class="card-content">
            <h4>Trump tried to burn down Obamacare. He set his hair on fire instead</h4>
            <p>It was a humiliating defeat, which Donald Trump tried to blame &#8211; unbelievably &#8211; on the Democrats</p>
          </div>
          <div class="card-action">Fri Mar 24 20:51:31 2017 - <a href="/#">Read more at US news | The Guardian</a></div>
        </div>
      </div>
      <div class="card horizontal California">
        <div class="card-image">
          <img src="https://i.guim.co.uk/img/media/cb733b14bea08c7b4a422a52102717823c1901ed/609_37_1281_769/master/1281.jpg?w=1200&amp;h=630&amp;q=55&amp;auto=format&amp;usm=12&amp;fit=crop&amp;crop=faces%2Centropy&amp;bm=normal&amp;ba=bottom%2Cleft&amp;blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&amp;s=639774828e18af1ba3e13a32c49464d4"/>
        </div>
        <div class="card-stacked">
          <div class="card-content">
            <h4>Harrison Ford to air traffic control: 'I'm the schmuck who landed on the taxiway' &#8211; audio</h4>
            <p>An audio recording released by John Wayne Airport in California on Saturday reveals Harrison Ford referring to himself as a &#8216;schmuck&#8217;, after he mistakenly flies low over an airliner that was taxiing on 13 February</p>
          </div>
          <div class="card-action">Sat Mar 25 18:46:45 2017 - <a href="/#">Read more at US news | The Guardian</a></div>
        </div>
      </div>
    </div>
    <script>var width = window.innerWidth * 0.7, 
    height = window.innerHeight-60;

// How energetically is the map moving into position?
var energy;
// How many stations couldn't be positioned?
var unplaced = 0;
// Position hash
var taken = {};
// Size of one grid square
var spacing = height/8.0;
// Has a metro line on the key been clicked?
var iso_toggle = 0;

// Realistically more colours than we will ever need but I'm hesitant to go for a hard limit
var color = color = d3.scale.ordinal()
  .domain(50)
  .range(["#1596ff", "#ff6401", "#fef302", "#03aa4a", "#38d8ce", "#c38ce2", "#fd85b0", "#a78f7b", "#d8d8d8", "#374a91", "#48e268", "#ffa103", "#ff576d", "#66c1fe", "#97f1a0", "#3fc104", "#febbc0", "#8494ad", "#a1fe04", "#e0bb10"]);

var radius = d3.scale.sqrt().range([0, 6]);

// var svg = d3.select("body")
//     .append("svg")
//     .attr("id", "graph")
//     .attr("width", width)
//     .attr("height", height)
//     .attr("viewBox", "0 0 " + width + " " + height )
//     .attr("preserveAspectRatio", "xMidYMid meet")
//     .attr("pointer-events", "all");

var article_container = d3.select("body")
    .append("div")
    .attr("id", "article-container")
    .attr("width", window.innerWidth * 0.3)
    .attr("height", height);

var force = d3.layout.force()
    .size([width, height-60])
    .charge(function(d){
        // Nodes with higher weights will repel more strongly
        return d.weight == 1? -300: -500;
    })
    .linkDistance(function(d){
        return height/15;
    })
    .linkStrength(1)
    .friction(0.96)
    .gravity(0.15)
    .alpha(1);

// NG things get regex replaced with actual JSON by the python script, do not remove
var metro_lines = {"Senate": [[0, 1], [1, 2], [2, 3], [3, 4], [4, 5], [5, 6], [6, 7]], "Florida": [[8, 9], [9, 10], [10, 11], [11, 12]], "Obamacare": [[1, 2], [2, 13], [13, 14], [14, 15], [15, 16], [16, 17], [17, 18], [18, 19]], "Sean Spicer": [[1, 20], [20, 4]], "New York": [[21, 22], [22, 16], [16, 23], [23, 24], [24, 25]], "California": [[26, 27], [27, 28]], "Democrats": [[14, 15], [15, 4], [4, 17]], "Barack Obama": [[29, 4], [4, 30]]};
var graph = {
    "nodes": [{"data": {"img": "https://i.guim.co.uk/img/media/9ddffc13603b5f4ddf257fe4c8e7023f323bb208/443_408_2597_1558/master/2597.jpg?w=1200&h=630&q=55&auto=format&usm=12&fit=crop&crop=faces%2Centropy&bm=normal&ba=bottom%2Cleft&blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&s=801ff9584538b215f40582694a8b1521", "title": "Will Trump be impeached \u2013 or is it just a liberal fantasy?", "url": "https://www.theguardian.com/us-news/2017/mar/22/donald-trump-president-impeached-liberals-history-process", "summary": "Only two presidents in history have been impeached, but murmurs continue to surround Trump. Here\u2019s how the process would work \u2013 if it would at all", "html": "Only two presidents in history have been impeached, but murmurs continue to surround Trump. Here\u2019s how the process would work \u2013 if it would at all<br/><br/><a href='https://www.theguardian.com/us-news/2017/mar/22/donald-trump-president-impeached-liberals-history-process'>Read more at US news | The Guardian</a>", "date": 1490167819000.0}, "terminus": true, "lines": ["Senate"], "name": "Will Trump be impeached \u2013 or is it just a liberal fantasy?"}, {"data": {"img": "https://i.guim.co.uk/img/media/44b6c2841b0376970060d90d26f089687a495532/0_153_2622_1573/master/2622.jpg?w=1200&h=630&q=55&auto=format&usm=12&fit=crop&crop=faces%2Centropy&bm=normal&ba=bottom%2Cleft&blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&s=4f09845d3e0023ec142a2a4e0290212e", "title": "Make-or-break day for Donald Trump's healthcare gamble", "url": "https://www.theguardian.com/us-news/2017/mar/24/make-or-break-day-for-donald-trumps-healthcare-gamble", "summary": "US president plays hardball with Congress by threatening to walk away from repealing Obamacare if the House fails to pass his healthcare bill", "html": "US president plays hardball with Congress by threatening to walk away from repealing Obamacare if the House fails to pass his healthcare bill<br/><br/><a href='https://www.theguardian.com/us-news/2017/mar/24/make-or-break-day-for-donald-trumps-healthcare-gamble'>Read more at US news | The Guardian</a>", "date": 1490350668000.0}, "terminus": true, "lines": ["Senate", "Obamacare", "Sean Spicer"], "name": "Make-or-break day for Donald Trump's healthcare gamble"}, {"data": {"img": "https://i.guim.co.uk/img/media/7cb78c6397ac1df649834acfee24b609628a144a/0_86_4500_2699/master/4500.jpg?w=1200&h=630&q=55&auto=format&usm=12&fit=crop&crop=faces%2Centropy&bm=normal&ba=bottom%2Cleft&blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&s=5bc27b6ff0526da54342971a099a429a", "title": "Trump tried to burn down Obamacare. He set his hair on fire instead", "url": "https://www.theguardian.com/commentisfree/2017/mar/24/trump-obamacare-trumpcare-defeat", "summary": "It was a humiliating defeat, which Donald Trump tried to blame \u2013 unbelievably \u2013 on the Democrats", "html": "It was a humiliating defeat, which Donald Trump tried to blame \u2013 unbelievably \u2013 on the Democrats<br/><br/><a href='https://www.theguardian.com/commentisfree/2017/mar/24/trump-obamacare-trumpcare-defeat'>Read more at US news | The Guardian</a>", "date": 1490388691000.0}, "terminus": false, "lines": ["Senate", "Obamacare"], "name": "Trump tried to burn down Obamacare. He set his hair on fire instead"}, {"data": {"img": "https://i.guim.co.uk/img/media/6e1b07ca29f95324a6f47574f13845cae7e764cc/95_0_3355_2013/master/3355.jpg?w=1200&h=630&q=55&auto=format&usm=12&fit=crop&crop=faces%2Centropy&bm=normal&ba=bottom%2Cleft&blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&s=508dc2c83ccd1762b8b169c1db08335e", "title": "Neil Gorsuch's confirmation hearing revealed his hidden similarity to Trump", "url": "https://www.theguardian.com/us-news/2017/mar/25/neil-gorsuch-confirmation-hearing-empathy-analysis", "summary": "The two appear to be a study in contrasts \u2013 but both display a remarkable lack of compassion. Their likeness could serve to justify Democrats\u2019 opposition", "html": "The two appear to be a study in contrasts \u2013 but both display a remarkable lack of compassion. Their likeness could serve to justify Democrats\u2019 opposition<br/><br/><a href='https://www.theguardian.com/us-news/2017/mar/25/neil-gorsuch-confirmation-hearing-empathy-analysis'>Read more at US news | The Guardian</a>", "date": 1490439600000.0}, "terminus": false, "lines": ["Senate"], "name": "Neil Gorsuch's confirmation hearing revealed his hidden similarity to Trump"}, {"data": {"img": "https://i.guim.co.uk/img/media/6445bfeffdcf1bb6a4b5f411bcc570fef54f6829/0_135_4500_2700/master/4500.jpg?w=1200&h=630&q=55&auto=format&usm=12&fit=crop&crop=faces%2Centropy&bm=normal&ba=bottom%2Cleft&blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&s=326a3abe409b4114179effd3aee9bd24", "title": "\u2018Move fast and break things\u2019: Trump\u2019s Obamacare failure and the backlash ahead", "url": "https://www.theguardian.com/us-news/2017/mar/25/donald-trump-healthcare-deal-republicans-obamacare", "summary": "Republicans suffered a devastating defeat on Obamacare. But the pulling of the American Health Care Act could be a \u2018blessing in disguise\u2019 for Trump", "html": "Republicans suffered a devastating defeat on Obamacare. But the pulling of the American Health Care Act could be a \u2018blessing in disguise\u2019 for Trump<br/><br/><a href='https://www.theguardian.com/us-news/2017/mar/25/donald-trump-healthcare-deal-republicans-obamacare'>Read more at US news | The Guardian</a>", "date": 1490463763000.0}, "terminus": true, "lines": ["Senate", "Sean Spicer", "Democrats", "Barack Obama"], "name": "\u2018Move fast and break things\u2019: Trump\u2019s Obamacare failure and the backlash ahead"}, {"data": {"img": "https://i.guim.co.uk/img/media/d4c26509df6ae3e016d5616f55d1688d0f4a0ba0/0_0_4935_2960/master/4935.jpg?w=1200&h=630&q=55&auto=format&usm=12&fit=crop&crop=faces%2Centropy&bm=normal&ba=bottom%2Cleft&blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&s=db1afe83a66c75990aea0bf3ffcbac3b", "title": "Lawmaker's 'peculiar midnight run' endangers Trump-Russia inquiry", "url": "https://www.theguardian.com/us-news/2017/mar/26/trump-russia-investigation-house-intelligence-devin-nunes", "summary": "House intelligence chair Devin Nunes reportedly disappeared from Uber ride, fueling further questions over his role in committee\u2019s investigation", "html": "House intelligence chair Devin Nunes reportedly disappeared from Uber ride, fueling further questions over his role in committee\u2019s investigation<br/><br/><a href='https://www.theguardian.com/us-news/2017/mar/26/trump-russia-investigation-house-intelligence-devin-nunes'>Read more at US news | The Guardian</a>", "date": 1490542595000.0}, "terminus": false, "lines": ["Senate"], "name": "Lawmaker's 'peculiar midnight run' endangers Trump-Russia inquiry"}, {"data": {"img": "https://i.guim.co.uk/img/media/d965dbcff31844d6ecfc2a8dea21567b81277875/0_156_4500_2699/master/4500.jpg?w=1200&h=630&q=55&auto=format&usm=12&fit=crop&crop=faces%2Centropy&bm=normal&ba=bottom%2Cleft&blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&s=23b079d72ef0a46f19dbee627549f317", "title": "Trump blames everyone but himself for failure of GOP healthcare legislation", "url": "https://www.theguardian.com/us-news/2017/mar/26/donald-trump-healthcare-blame-freedom-caucus-democrats", "summary": "President\u2019s targets include conservatives, Democrats and a possible veiled jab at Paul Ryan as Republican hand-wringing over repeal-and-replace failure continues", "html": "President\u2019s targets include conservatives, Democrats and a possible veiled jab at Paul Ryan as Republican hand-wringing over repeal-and-replace failure continues<br/><br/><a href='https://www.theguardian.com/us-news/2017/mar/26/donald-trump-healthcare-blame-freedom-caucus-democrats'>Read more at US news | The Guardian</a>", "date": 1490547037000.0}, "terminus": false, "lines": ["Senate"], "name": "Trump blames everyone but himself for failure of GOP healthcare legislation"}, {"data": {"img": "https://i.guim.co.uk/img/media/b3aafcfa7a19b71f985571b32c8bce943c5d62d5/0_220_3000_1800/master/3000.jpg?w=1200&h=630&q=55&auto=format&usm=12&fit=crop&crop=faces%2Centropy&bm=normal&ba=bottom%2Cleft&blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&s=1d347a545b31f796725d5bbab4090199", "title": "Roger Stone calls Trump-Russia inquiry 'a scandal in search of evidence'", "url": "https://www.theguardian.com/us-news/2017/mar/26/roger-stone-trump-russia-house-intelligence-committee", "summary": "Confidant of president says he has not heard back from House intelligence committee as ranking Democrat Adam Schiff questions conduct of Republican chair", "html": "Confidant of president says he has not heard back from House intelligence committee as ranking Democrat Adam Schiff questions conduct of Republican chair<br/><br/><a href='https://www.theguardian.com/us-news/2017/mar/26/roger-stone-trump-russia-house-intelligence-committee'>Read more at US news | The Guardian</a>", "date": 1490552887000.0}, "terminus": true, "lines": ["Senate"], "name": "Roger Stone calls Trump-Russia inquiry 'a scandal in search of evidence'"}, {"data": {"img": "https://i.guim.co.uk/img/media/19f7e375165aa4b84641b5fccf3c7305f534041d/0_200_3454_2073/master/3454.jpg?w=1200&h=630&q=55&auto=format&usm=12&fit=crop&crop=faces%2Centropy&bm=normal&ba=bottom%2Cleft&blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&s=a85f4885af110d0725641bee2c9c22d6", "title": "UK retail sales surge as consumers shrug off Brexit fears - as it happened", "url": "https://www.theguardian.com/business/live/2017/mar/23/markets-pause-ahead-of-crucial-us-healthcare-vote-business-live", "summary": "Retail sales rose by a stronger-than-expected 1.4% in February as UK consumers took Brexit and rising inflation in their stride", "html": "Retail sales rose by a stronger-than-expected 1.4% in February as UK consumers took Brexit and rising inflation in their stride<br/><br/><a href='https://www.theguardian.com/business/live/2017/mar/23/markets-pause-ahead-of-crucial-us-healthcare-vote-business-live'>Read more at US news | The Guardian</a>", "date": 1490281930000.0}, "terminus": true, "lines": ["Florida"], "name": "UK retail sales surge as consumers shrug off Brexit fears - as it happened"}, {"data": {"img": "https://i.guim.co.uk/img/media/000dd49990629707ea7f9c6c4deb2371dcf8a414/0_41_4579_2747/master/4579.jpg?w=1200&h=630&q=55&auto=format&usm=12&fit=crop&crop=faces%2Centropy&bm=normal&ba=bottom%2Cleft&blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&s=14a4a31f2fc21a0a4ad10beef65b6d74", "title": "Chris Chiozza nails three-pointer at OT buzzer to lead Florida past Wisconsin", "url": "https://www.theguardian.com/sport/2017/mar/24/chris-chiozza-florida-wisconsin-ncaa-basketball", "summary": "Chiozza drops in the winner to send Gators into the Elite Eight, where they\u2019ll plat South Carolina in an all-SEC regional final in New York", "html": "Chiozza drops in the winner to send Gators into the Elite Eight, where they\u2019ll plat South Carolina in an all-SEC regional final in New York<br/><br/><a href='https://www.theguardian.com/sport/2017/mar/24/chris-chiozza-florida-wisconsin-ncaa-basketball'>Read more at US news | The Guardian</a>", "date": 1490420665000.0}, "terminus": false, "lines": ["Florida"], "name": "Chris Chiozza nails three-pointer at OT buzzer to lead Florida past Wisconsin"}, {"data": {"img": "https://i.guim.co.uk/img/media/dcf7e43ac590462d9c12ba26ac285053e0bf81e5/39_0_876_526/master/876.jpg?w=1200&h=630&q=55&auto=format&usm=12&fit=crop&crop=faces%2Centropy&bm=normal&ba=bottom%2Cleft&blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&s=4128edcf5e4525d0e0737ca62d7dda5d", "title": "Former IndyCar and Nascar driver David Steele killed during Florida race", "url": "https://www.theguardian.com/sport/2017/mar/26/david-steele-killed-desoto-speedway-florida", "summary": "Sprint car veteran David Steele has died during a race in Florida after his car struck a retaining wall", "html": "Sprint car veteran David Steele has died during a race in Florida after his car struck a retaining wall<br/><br/><a href='https://www.theguardian.com/sport/2017/mar/26/david-steele-killed-desoto-speedway-florida'>Read more at US news | The Guardian</a>", "date": 1490543242000.0}, "terminus": false, "lines": ["Florida"], "name": "Former IndyCar and Nascar driver David Steele killed during Florida race"}, {"data": {"img": "https://i.guim.co.uk/img/media/38cc459fd8c80e857bda03ff65c780f0de25a5ca/0_136_2970_1783/master/2970.jpg?w=1200&h=630&q=55&auto=format&usm=12&fit=crop&crop=faces%2Centropy&bm=normal&ba=bottom%2Cleft&blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&s=cecffaa49c09c7e65f6872553c0b2cfc", "title": "NCAA Tournament: South Carolina reach first Final Four as UNC beat Kentucky", "url": "https://www.theguardian.com/sport/2017/mar/26/ncaa-tournament-south-carolina-florida-college-basketball", "summary": "Sindarius Thornwell scored 26 points and South Carolina earned its first trip to the Final Four with a 77-70 victory over Florida", "html": "Sindarius Thornwell scored 26 points and South Carolina earned its first trip to the Final Four with a 77-70 victory over Florida<br/><br/><a href='https://www.theguardian.com/sport/2017/mar/26/ncaa-tournament-south-carolina-florida-college-basketball'>Read more at US news | The Guardian</a>", "date": 1490562590000.0}, "terminus": false, "lines": ["Florida"], "name": "NCAA Tournament: South Carolina reach first Final Four as UNC beat Kentucky"}, {"data": {"img": "https://i.guim.co.uk/img/media/5941478f1951db1e43c0232664ff21726d6e8509/0_39_5191_3115/master/5191.jpg?w=1200&h=630&q=55&auto=format&usm=12&fit=crop&crop=faces%2Centropy&bm=normal&ba=bottom%2Cleft&blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&s=10abfd401b07baef08eec723f6823881", "title": "Sunshine state shuns solar as overcast New York basks in clean energy boom", "url": "https://www.theguardian.com/us-news/2017/mar/27/solar-power-florida-new-york-renewable-energy-policies", "summary": "Despite its natural advantages, disincentives mean Florida has few solar panels but the Empire state\u2019s policies have boosted installed solar capacity by 800%", "html": "Despite its natural advantages, disincentives mean Florida has few solar panels but the Empire state\u2019s policies have boosted installed solar capacity by 800%<br/><br/><a href='https://www.theguardian.com/us-news/2017/mar/27/solar-power-florida-new-york-renewable-energy-policies'>Read more at US news | The Guardian</a>", "date": 1490598000000.0}, "terminus": true, "lines": ["Florida"], "name": "Sunshine state shuns solar as overcast New York basks in clean energy boom"}, {"data": {"img": "https://i.guim.co.uk/img/media/a11fdcabc72a3840df1d87dd89b5a7e8b1d3aca9/0_75_2906_1744/master/2906.jpg?w=1200&h=630&q=55&auto=format&usm=12&fit=crop&crop=faces%2Centropy&bm=normal&ba=bottom%2Cleft&blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&s=f231d3a012db4cf225ecb5238f4ba089", "title": "Paul Ryan on failed healthcare bill: 'This is a disappointing day\u2019 \u2013 video", "url": "https://www.theguardian.com/us-news/video/2017/mar/24/paul-ryan-failed-healthcare-bill-video", "summary": "A crestfallen Paul Ryan admitted Republicans \u2018came up short\u2019 in their efforts to overhaul the US healthcare system on Friday", "html": "A crestfallen Paul Ryan admitted Republicans \u2018came up short\u2019 in their efforts to overhaul the US healthcare system on Friday<br/><br/><a href='https://www.theguardian.com/us-news/video/2017/mar/24/paul-ryan-failed-healthcare-bill-video'>Read more at US news | The Guardian</a>", "date": 1490391155000.0}, "terminus": false, "lines": ["Obamacare"], "name": "Paul Ryan on failed healthcare bill: 'This is a disappointing day\u2019 \u2013 video"}, {"data": {"img": "https://i.guim.co.uk/img/media/87bf7c03c68ec897295622c3735d8053b31b8a96/0_0_1800_1080/master/1800.png?w=1200&h=630&q=55&auto=format&usm=12&fit=crop&crop=faces%2Centropy&bm=normal&ba=bottom%2Cleft&blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&s=d7f5262fb986435a739aeface5a9e145", "title": "Donald Trump lambasts Democrats as Obamacare replacement bill pulled \u2013 video", "url": "https://www.theguardian.com/us-news/video/2017/mar/25/donald-trump-lambasts-democrats-as-obamacare-replacement-bill-pulled-video", "summary": "Trump says Democrats, including Nancy Pelosi, to blame after Republicans pull House bill meant to replace Affordable Care Act", "html": "Trump says Democrats, including Nancy Pelosi, to blame after Republicans pull House bill meant to replace Affordable Care Act<br/><br/><a href='https://www.theguardian.com/us-news/video/2017/mar/25/donald-trump-lambasts-democrats-as-obamacare-replacement-bill-pulled-video'>Read more at US news | The Guardian</a>", "date": 1490413007000.0}, "terminus": true, "lines": ["Obamacare", "Democrats"], "name": "Donald Trump lambasts Democrats as Obamacare replacement bill pulled \u2013 video"}, {"data": {"img": "https://i.guim.co.uk/img/media/f1eb553720eec58eaae91b26bed8c2b0ab969295/0_60_3500_2100/master/3500.jpg?w=1200&h=630&q=55&auto=format&usm=12&fit=crop&crop=faces%2Centropy&bm=normal&ba=bottom%2Cleft&blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&s=c81c7d6ae8cb75e923c2d7f62dc45a76", "title": "Donald Trump blames Democrats for stunning failure to repeal Obamacare", "url": "https://www.theguardian.com/us-news/2017/mar/24/republican-healthcare-plan-bill-vote-pulled-obamacare-trump", "summary": "Weeks of negotiations over American Health Care Act fail to build a GOP consensus, forcing president to pull legislation from House vote", "html": "Weeks of negotiations over American Health Care Act fail to build a GOP consensus, forcing president to pull legislation from House vote<br/><br/><a href='https://www.theguardian.com/us-news/2017/mar/24/republican-healthcare-plan-bill-vote-pulled-obamacare-trump'>Read more at US news | The Guardian</a>", "date": 1490436826000.0}, "terminus": false, "lines": ["Obamacare", "Democrats"], "name": "Donald Trump blames Democrats for stunning failure to repeal Obamacare"}, {"data": {"img": "https://i.guim.co.uk/img/media/b3d89a3b5d7b833d941acd50b982178f35105bd6/0_457_4032_2419/master/4032.jpg?w=1200&h=630&q=55&auto=format&usm=12&fit=crop&crop=faces%2Centropy&bm=normal&ba=bottom%2Cleft&blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&s=f6f7e54c03fcc553460eb853093d5122", "title": "'He's a street fighter': Trump fans rally after heavy blow on healthcare", "url": "https://www.theguardian.com/us-news/2017/mar/25/new-york-trump-rally-healthcare", "summary": "In New York, supporters said the president was far from down and out despite failure on Obamacare and an FBI probe into alleged Russia ties", "html": "In New York, supporters said the president was far from down and out despite failure on Obamacare and an FBI probe into alleged Russia ties<br/><br/><a href='https://www.theguardian.com/us-news/2017/mar/25/new-york-trump-rally-healthcare'>Read more at US news | The Guardian</a>", "date": 1490482160000.0}, "terminus": false, "lines": ["Obamacare", "New York"], "name": "'He's a street fighter': Trump fans rally after heavy blow on healthcare"}, {"data": {"img": "https://i.guim.co.uk/img/media/ba43fe3133c8eb1a16f3c93e80a05c223afe34c2/0_217_3490_2094/master/3490.jpg?w=1200&h=630&q=55&auto=format&usm=12&fit=crop&crop=faces%2Centropy&bm=normal&ba=bottom%2Cleft&blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&s=3ec7665a02308110e3ed5653c74af262", "title": "The showdown that exposed the rift between Republican ideology and reality", "url": "https://www.theguardian.com/us-news/2017/mar/26/the-showdown-that-exposed-the-rift-between-republican-ideology-and-reality", "summary": "Republicans calling for a return to the pro-business government of the 1920s never reflected political reality \u2013 and now the party can never be the same", "html": "Republicans calling for a return to the pro-business government of the 1920s never reflected political reality \u2013 and now the party can never be the same<br/><br/><a href='https://www.theguardian.com/us-news/2017/mar/26/the-showdown-that-exposed-the-rift-between-republican-ideology-and-reality'>Read more at US news | The Guardian</a>", "date": 1490487316000.0}, "terminus": true, "lines": ["Obamacare", "Democrats"], "name": "The showdown that exposed the rift between Republican ideology and reality"}, {"data": {"img": "https://i.guim.co.uk/img/media/e2705cc4305b4157131478bfd26cdee22b6b3bf0/39_246_2421_1452/master/2421.jpg?w=1200&h=630&q=55&auto=format&usm=12&fit=crop&crop=faces%2Centropy&bm=normal&ba=bottom%2Cleft&blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&s=d991455cdd107d167b31fb2b319bc201", "title": "Wall Street\u2019s love affair with Trump cools as healthcare bill sows welcome doubts", "url": "https://www.theguardian.com/business/2017/mar/26/wall-street-love-affair-trump-healthcare-sows-doubts", "summary": "US president\u2019s failure to win backing for his repeal of Obamacare has delivered a dose of reality to the markets", "html": "US president\u2019s failure to win backing for his repeal of Obamacare has delivered a dose of reality to the markets<br/><br/><a href='https://www.theguardian.com/business/2017/mar/26/wall-street-love-affair-trump-healthcare-sows-doubts'>Read more at US news | The Guardian</a>", "date": 1490511744000.0}, "terminus": false, "lines": ["Obamacare"], "name": "Wall Street\u2019s love affair with Trump cools as healthcare bill sows welcome doubts"}, {"data": {"img": "https://i.guim.co.uk/img/media/927172769945233082259e1f65b30d635147fc33/0_193_3500_2099/master/3500.jpg?w=1200&h=630&q=55&auto=format&usm=12&fit=crop&crop=faces%2Centropy&bm=normal&ba=bottom%2Cleft&blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&s=d446e5d314a02f6ef71f4344d9d2bfb9", "title": "The Guardian view on Trump and Obamacare: a welcome failure for a damaging plan", "url": "https://www.theguardian.com/commentisfree/2017/mar/26/the-guardian-view-on-trump-and-obamacare-a-welcome-failure-for-a-damaging-plan", "summary": "Editorial: In spite of controlling the White House and both wings of Congress, the Republicans allowed ideological obsessions to derail a plan they have been trumpeting for years", "html": "Editorial: In spite of controlling the White House and both wings of Congress, the Republicans allowed ideological obsessions to derail a plan they have been trumpeting for years<br/><br/><a href='https://www.theguardian.com/commentisfree/2017/mar/26/the-guardian-view-on-trump-and-obamacare-a-welcome-failure-for-a-damaging-plan'>Read more at US news | The Guardian</a>", "date": 1490553266000.0}, "terminus": true, "lines": ["Obamacare"], "name": "The Guardian view on Trump and Obamacare: a welcome failure for a damaging plan"}, {"data": {"img": "https://i.guim.co.uk/img/media/62990f6d3a2d3c035dd531526fca6b50880356dd/0_50_5900_3541/master/5900.jpg?w=1200&h=630&q=55&auto=format&usm=12&fit=crop&crop=faces%2Centropy&bm=normal&ba=bottom%2Cleft&blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&s=5a8b1148465661cebd11e12374ffc18e", "title": "President \u2018pulled out every stop\u2019 to pass healthcare bill, Spicer says \u2013 video", "url": "https://www.theguardian.com/us-news/video/2017/mar/24/sean-spicer-white-house-briefing-healthcare-video", "summary": "The White House said on Friday that Donald Trump had done all he could to pass the Obamacare replacement, amid signs the measure might not pass", "html": "The White House said on Friday that Donald Trump had done all he could to pass the Obamacare replacement, amid signs the measure might not pass<br/><br/><a href='https://www.theguardian.com/us-news/video/2017/mar/24/sean-spicer-white-house-briefing-healthcare-video'>Read more at US news | The Guardian</a>", "date": 1490382319000.0}, "terminus": false, "lines": ["Sean Spicer"], "name": "President \u2018pulled out every stop\u2019 to pass healthcare bill, Spicer says \u2013 video"}, {"data": {"img": "https://i.guim.co.uk/img/media/4b1cf221971ee251a0083f1cc0cedf0d0eb0ec41/0_219_4930_2959/master/4930.jpg?w=1200&h=630&q=55&auto=format&usm=12&fit=crop&crop=faces%2Centropy&bm=normal&ba=bottom%2Cleft&blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&s=c7c19dfbeb7632e91b5e20f50f5592d3", "title": "Nervous markets take fright at prospect of Trump failing to deliver", "url": "https://www.theguardian.com/business/2017/mar/22/nervous-markets-take-fright-at-prospect-of-trump-failing-to-deliver", "summary": "US shares fell \u2013 with a knock-on effect elsewhere \u2013 as the new administration struggles to follow through on spending and tax cuts promises", "html": "US shares fell \u2013 with a knock-on effect elsewhere \u2013 as the new administration struggles to follow through on spending and tax cuts promises<br/><br/><a href='https://www.theguardian.com/business/2017/mar/22/nervous-markets-take-fright-at-prospect-of-trump-failing-to-deliver'>Read more at US news | The Guardian</a>", "date": 1490206917000.0}, "terminus": true, "lines": ["New York"], "name": "Nervous markets take fright at prospect of Trump failing to deliver"}, {"data": {"img": "https://i.guim.co.uk/img/media/feac0be29089668c999780fc96e1c6ec9d61b97d/0_117_3500_2101/master/3500.jpg?w=1200&h=630&q=55&auto=format&usm=12&fit=crop&crop=faces%2Centropy&bm=normal&ba=bottom%2Cleft&blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&s=663eaabf51d6f5b532900d35a4111b28", "title": "The week in patriarchy: who needs prenatal and newborn care, anyway?", "url": "https://www.theguardian.com/world/commentisfree/2017/mar/24/the-week-in-patriarchy-prenatal-newborn-care-anyway", "summary": "These benefits are optional in the Republicans\u2019 world. That\u2019s what happens when the conservatives\u2019 disregard for women and healthcare meet", "html": "These benefits are optional in the Republicans\u2019 world. That\u2019s what happens when the conservatives\u2019 disregard for women and healthcare meet<br/><br/><a href='https://www.theguardian.com/world/commentisfree/2017/mar/24/the-week-in-patriarchy-prenatal-newborn-care-anyway'>Read more at US news | The Guardian</a>", "date": 1490379314000.0}, "terminus": false, "lines": ["New York"], "name": "The week in patriarchy: who needs prenatal and newborn care, anyway?"}, {"data": {"img": "https://i.guim.co.uk/img/media/fcc8bd4e8804502e5a07964ef4f63f53109d83e2/0_102_3000_1800/master/3000.jpg?w=1200&h=630&q=55&auto=format&usm=12&fit=crop&crop=faces%2Centropy&bm=normal&ba=bottom%2Cleft&blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&s=aff5014d28a1b68f23694372f920865a", "title": "David Rockefeller obituary", "url": "https://www.theguardian.com/us-news/2017/mar/26/david-rockefeller-obituary", "summary": "Chairman of Chase Manhattan bank and one of the US\u2019s leading philanthropists", "html": "Chairman of Chase Manhattan bank and one of the US\u2019s leading philanthropists<br/><br/><a href='https://www.theguardian.com/us-news/2017/mar/26/david-rockefeller-obituary'>Read more at US news | The Guardian</a>", "date": 1490532685000.0}, "terminus": false, "lines": ["New York"], "name": "David Rockefeller obituary"}, {"data": {"img": "https://i.guim.co.uk/img/media/6971e12f754c9f5a105ab5e6da3c60a879d189ea/0_61_3888_2332/master/3888.jpg?w=1200&h=630&q=55&auto=format&usm=12&fit=crop&crop=faces%2Centropy&bm=normal&ba=bottom%2Cleft&blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&s=4ba81b81cad43ccdc3eaf89795fbf789", "title": "Joe Biden: \u2018Do I regret not being president? Yes.\u2019 \u2013 video", "url": "https://www.theguardian.com/us-news/video/2017/mar/26/joe-biden-regret-president-video", "summary": "Former vice-president Joe Biden says he regrets not being president, despite making the right decision not to run for office", "html": "Former vice-president Joe Biden says he regrets not being president, despite making the right decision not to run for office<br/><br/><a href='https://www.theguardian.com/us-news/video/2017/mar/26/joe-biden-regret-president-video'>Read more at US news | The Guardian</a>", "date": 1490544640000.0}, "terminus": false, "lines": ["New York"], "name": "Joe Biden: \u2018Do I regret not being president? Yes.\u2019 \u2013 video"}, {"data": {"img": "https://i.guim.co.uk/img/media/0218e98592dab5ac5a74e16ad591f98c04c61a5f/0_0_640_384/master/640.jpg?w=1200&h=630&q=55&auto=format&usm=12&fit=crop&crop=faces%2Centropy&bm=normal&ba=bottom%2Cleft&blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&s=6ac6046a462058bbf321d7f033e69187", "title": "Joe Biden: I regret not running for president \u2013 because I could have won", "url": "https://www.theguardian.com/us-news/2017/mar/26/joe-biden-2016-presidential-election", "summary": "Former vice-president tells college students in New York \u2018I don\u2019t have a lot of hope right now\u2019 about Donald Trump\u2019s administration", "html": "Former vice-president tells college students in New York \u2018I don\u2019t have a lot of hope right now\u2019 about Donald Trump\u2019s administration<br/><br/><a href='https://www.theguardian.com/us-news/2017/mar/26/joe-biden-2016-presidential-election'>Read more at US news | The Guardian</a>", "date": 1490545088000.0}, "terminus": true, "lines": ["New York"], "name": "Joe Biden: I regret not running for president \u2013 because I could have won"}, {"data": {"img": "https://i.guim.co.uk/img/media/cb733b14bea08c7b4a422a52102717823c1901ed/609_37_1281_769/master/1281.jpg?w=1200&h=630&q=55&auto=format&usm=12&fit=crop&crop=faces%2Centropy&bm=normal&ba=bottom%2Cleft&blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&s=639774828e18af1ba3e13a32c49464d4", "title": "Harrison Ford to air traffic control: 'I'm the schmuck who landed on the taxiway' \u2013 audio", "url": "https://www.theguardian.com/film/video/2017/mar/25/harrison-ford-to-air-traffic-control-im-the-schmuck-who-landed-on-the-taxiway-audio", "summary": "An audio recording released by John Wayne Airport in California on Saturday reveals Harrison Ford referring to himself as a \u2018schmuck\u2019, after he mistakenly flies low over an airliner that was taxiing on 13 February", "html": "An audio recording released by John Wayne Airport in California on Saturday reveals Harrison Ford referring to himself as a \u2018schmuck\u2019, after he mistakenly flies low over an airliner that was taxiing on 13 February<br/><br/><a href='https://www.theguardian.com/film/video/2017/mar/25/harrison-ford-to-air-traffic-control-im-the-schmuck-who-landed-on-the-taxiway-audio'>Read more at US news | The Guardian</a>", "date": 1490467605000.0}, "terminus": true, "lines": ["California"], "name": "Harrison Ford to air traffic control: 'I'm the schmuck who landed on the taxiway' \u2013 audio"}, {"data": {"img": "https://i.guim.co.uk/img/media/b88cbdee5b382c1c733bec5416f6e9dc34e09fcc/0_86_2400_1440/master/2400.jpg?w=1200&h=630&q=55&auto=format&usm=12&fit=crop&crop=faces%2Centropy&bm=normal&ba=bottom%2Cleft&blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&s=f849e0dd8019c45a02db46a9b75d4230", "title": "Fights erupt at pro-Donald Trump rally on California beach", "url": "https://www.theguardian.com/us-news/2017/mar/26/fights-erupt-at-pro-donald-trump-rally-on-california-beach", "summary": "At least one demonstrator is doused with pepper spray as anti-Trump protesters clash with the US president\u2019s supporters", "html": "At least one demonstrator is doused with pepper spray as anti-Trump protesters clash with the US president\u2019s supporters<br/><br/><a href='https://www.theguardian.com/us-news/2017/mar/26/fights-erupt-at-pro-donald-trump-rally-on-california-beach'>Read more at US news | The Guardian</a>", "date": 1490493413000.0}, "terminus": false, "lines": ["California"], "name": "Fights erupt at pro-Donald Trump rally on California beach"}, {"data": {"img": "https://i.guim.co.uk/img/media/ddf1d9149810230dc471422194fd6bb779cde881/0_16_2400_1440/master/2400.jpg?w=1200&h=630&q=55&auto=format&usm=12&fit=crop&crop=faces%2Centropy&bm=normal&ba=bottom%2Cleft&blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&s=8bb496ac0c0eb9625a04846d2b8aa556", "title": "Fights break out at pro-Trump rally in California \u2013 video", "url": "https://www.theguardian.com/us-news/video/2017/mar/26/fights-pro-trump-rally-california-video", "summary": "President Trump supporters clash with counter-protesters at a rally on a popular Californian beach", "html": "President Trump supporters clash with counter-protesters at a rally on a popular Californian beach<br/><br/><a href='https://www.theguardian.com/us-news/video/2017/mar/26/fights-pro-trump-rally-california-video'>Read more at US news | The Guardian</a>", "date": 1490523021000.0}, "terminus": true, "lines": ["California"], "name": "Fights break out at pro-Trump rally in California \u2013 video"}, {"data": {"img": "https://i.guim.co.uk/img/media/5e28bf6cdeb5daa087d4000042c70b55d33b2ed9/0_94_4500_2700/master/4500.jpg?w=1200&h=630&q=55&auto=format&usm=12&fit=crop&crop=faces%2Centropy&bm=normal&ba=bottom%2Cleft&blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&s=893367b575b1ff2fb7058140ecc02b9a", "title": "Trump must convert surging US confidence into real growth", "url": "https://www.theguardian.com/business/2017/mar/20/why-surge-positive-us-business-thinking-not-good-thing-truimp-markets-mohamed-el-erian", "summary": "The exuberant market reaction to his win has not been translated into progress \u2013 he must work with Congress to deliver", "html": "The exuberant market reaction to his win has not been translated into progress \u2013 he must work with Congress to deliver<br/><br/><a href='https://www.theguardian.com/business/2017/mar/20/why-surge-positive-us-business-thinking-not-good-thing-truimp-markets-mohamed-el-erian'>Read more at US news | The Guardian</a>", "date": 1490040590000.0}, "terminus": true, "lines": ["Barack Obama"], "name": "Trump must convert surging US confidence into real growth"}, {"data": {"img": "https://i.guim.co.uk/img/media/feaa9aa18b4ffe13be6ab9d488100afffd92a605/0_21_3500_2100/master/3500.jpg?w=1200&h=630&q=55&auto=format&usm=12&fit=crop&crop=faces%2Centropy&bm=normal&ba=bottom%2Cleft&blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&s=82c63052ae8de1135718518c76d7a4a8", "title": "Trump to sign executive order undoing Obama's clean power plan", "url": "https://www.theguardian.com/environment/2017/mar/26/trump-executive-order-clean-power-plan-coal-plants", "summary": "EPA head Scott Pruitt, who sued to halt plan as Oklahoma\u2019s AG, claims ending restrictions on coal power plants will be \u2018pro-growth and pro-environment\u2019", "html": "EPA head Scott Pruitt, who sued to halt plan as Oklahoma\u2019s AG, claims ending restrictions on coal power plants will be \u2018pro-growth and pro-environment\u2019<br/><br/><a href='https://www.theguardian.com/environment/2017/mar/26/trump-executive-order-clean-power-plan-coal-plants'>Read more at US news | The Guardian</a>", "date": 1490558386000.0}, "terminus": true, "lines": ["Barack Obama"], "name": "Trump to sign executive order undoing Obama's clean power plan"}] ,
    "links": [{"count": 1, "source": 0, "line": "Senate", "target": 1}, {"count": 1, "source": 1, "line": "Senate", "target": 2}, {"count": 1, "source": 2, "line": "Senate", "target": 3}, {"count": 1, "source": 3, "line": "Senate", "target": 4}, {"count": 1, "source": 4, "line": "Senate", "target": 5}, {"count": 1, "source": 5, "line": "Senate", "target": 6}, {"count": 1, "source": 6, "line": "Senate", "target": 7}, {"count": 1, "source": 8, "line": "Florida", "target": 9}, {"count": 1, "source": 9, "line": "Florida", "target": 10}, {"count": 1, "source": 10, "line": "Florida", "target": 11}, {"count": 1, "source": 11, "line": "Florida", "target": 12}, {"count": 2, "source": 1, "line": "Obamacare", "target": 2}, {"count": 1, "source": 2, "line": "Obamacare", "target": 13}, {"count": 1, "source": 13, "line": "Obamacare", "target": 14}, {"count": 1, "source": 14, "line": "Obamacare", "target": 15}, {"count": 1, "source": 15, "line": "Obamacare", "target": 16}, {"count": 1, "source": 16, "line": "Obamacare", "target": 17}, {"count": 1, "source": 17, "line": "Obamacare", "target": 18}, {"count": 1, "source": 18, "line": "Obamacare", "target": 19}, {"count": 1, "source": 1, "line": "Sean Spicer", "target": 20}, {"count": 1, "source": 20, "line": "Sean Spicer", "target": 4}, {"count": 1, "source": 21, "line": "New York", "target": 22}, {"count": 1, "source": 22, "line": "New York", "target": 16}, {"count": 1, "source": 16, "line": "New York", "target": 23}, {"count": 1, "source": 23, "line": "New York", "target": 24}, {"count": 1, "source": 24, "line": "New York", "target": 25}, {"count": 1, "source": 26, "line": "California", "target": 27}, {"count": 1, "source": 27, "line": "California", "target": 28}, {"count": 2, "source": 14, "line": "Democrats", "target": 15}, {"count": 1, "source": 15, "line": "Democrats", "target": 4}, {"count": 1, "source": 4, "line": "Democrats", "target": 17}, {"count": 1, "source": 29, "line": "Barack Obama", "target": 4}, {"count": 1, "source": 4, "line": "Barack Obama", "target": 30}]
};

// Dates get serialised as plain ints
for (var n=0; n<graph.nodes.length;++n) {
  graph.nodes[n].data.date = new Date(graph.nodes[n].data.date);
}

// Keep a record of which links have multiple metro lines
var multiEdges = {};
for (var l of graph.links) {
  multiEdges[[graph.nodes[l.source], graph.nodes[l.target]]] = 
    Math.max(l.count, 
            multiEdges[[graph.nodes[l.source], 
            graph.nodes[l.target]]]||1);
}

// Helper functions for general station movement, calculation and manipulation
function isInterchange(d) { return d.lines.length > 1; }
function linelength(p1, p2){ return Math.sqrt(Math.pow(p1.x-p2.x,2) + Math.pow(p1.y-p2.y,2)); }
function nan(v) { return v !== v; }
function coordinates(p) { return JSON.stringify({x:Math.round(p.x, 2),y:Math.round(p.y, 2)}); }
function octilinear(p1, p2) {
  if (p1.y == p2.y) {
    return true;
  } else if (p1.x == p2.x) {
    return true;
  } else {
    return Math.abs((p2.x-p1.x)/(p2.y-p1.y)) < 0.1;
  }
}
function gradient(a, b){ return (b.py-a.py)/(b.px-a.px); }
function dist2d(a, b){ return {x: (b.px-a.px), y:(b.py-a.py)}; }

// All the d3 drawing stuff and main loop
var drawGraph = function (graph) {

  force.nodes(graph.nodes)
    .links(graph.links)
    .on("tick", function() {
        // Every tick, change the energy the map has to move relative to how "good"
        // its layout is. Bad graph => high energy to reposition, & vice versa.
        energy = Math.log(octilinearity())/10 + Math.log(lineStraightness())/10;
        force.alpha(energy);
        tick();
    })
    .start();

  // Create the metro line links
  var link = svg.selectAll(".link")
    .data(graph.links)
    .enter().append("path")
    .style("stroke", function(d) {
      return color(d.line); 
    })
    .style("stroke-width", function(d) {
      return 7; // Math.min(10, Math.floor(18/multiEdges[[d.source, d.target]])); 
    })
    .attr("class", function (d) {
      return "link count" + d.count;
    });
  
  // Bind the stations to their data
  var node = svg.selectAll(".node")
    .data(graph.nodes)
    .enter().append("g")
    .attr("class", "node")
    .on("click", function(d){
      // Reset all the circles
      var nodes = d3.selectAll(".node");
      nodes.each(function(d) { 
        d3.select(this).select("circle").transition().duration(250)
          .style("fill", isInterchange(d) ? "white" : color(d.lines[0]))
        });
        d3.select(this).select("circle").transition().duration(250)
        .style("fill", "black")
        // __.data__.data is not a d3 thing (the last .data element is ours and poorly named)
        showArticle(this.__data__.data);
      })
    .call(force.drag);

  // Create the station tooltips
  node.append("title").text(function(d) { return d.name; });

  // Add the station circles and conditionally colour
  node.append("circle")
  .attr("r", function (d) {
    return isInterchange(d)? radius(4): radius(1);
  })
  .style("stroke", function (d) {
      return isInterchange(d) ? "black" : color(d.lines[0]);
  })
  .style("fill", function (d) {
      return isInterchange(d) ? "white" : color(d.lines[0]);
  });

  // Animate.. lots
  function tick() {

    function multiTranslate(targetDistance, point0, point1) {
    // This function is taken from http://webiks.com/d3-js-force-layout-straight-parallel-links/
      var x1_x0 = point1.x - point0.x,
          y1_y0 = point1.y - point0.y,
          x2_x0, y2_y0;
      if (y1_y0 === 0) {
          x2_x0 = 0;
          y2_y0 = targetDistance;
      } else {
          var angle = Math.atan((x1_x0) / (y1_y0));
          x2_x0 = -targetDistance * Math.cos(angle);
          y2_y0 = targetDistance * Math.sin(angle);
      }
      return {dx: x2_x0, dy: y2_y0};
    }

    // Change the angle and position of the links as they move
    link.attr("d", function (d) {
      var x1 = d.source.x, y1 = d.source.y,
          x2 = d.target.x, y2 = d.target.y,
          dr = 0;
          var lw = 7; //Math.min(7, Math.floor(18/multiEdges[[d.source, d.target]]));
          var offset = multiTranslate(d.count==1?0:(Math.floor(d.count/2))*(d.count%2?-lw:lw), d.source, d.target);
          x1 += offset.dx;
          x2 += offset.dx;
          y1 += offset.dy;
          y2 += offset.dy;
      return "M" + x1 + "," + y1 + "A" + dr + "," + dr + " 0 0,1 " + x2 + "," + y2; });

    // Change the position of the nodes as they move & don't let them go off canvas
    node.attr("transform", function (d) { return "translate(" + d.x + "," + d.y + ")"; });
        node
        .attr("cx", function(d) { return d.x = Math.max(10, Math.min(width-10, d.x)); }) 
        .attr("cy", function(d) { return d.y = Math.max(10, Math.min(height-10, d.y)); });

  // Draw the key & bind the click events
   var key = svg.selectAll(".key")
    .data(color.domain())
    .enter().append("g")
    .attr("class", "key")
    .attr("transform", function(d, i) { return "translate(0," + i * 25 + ")"; });
  key.append("rect")
    .attr("x", 20)
    .attr("y", 20)
    .attr("width", 50)
    .attr("height", 10)
    .attr("line", function(d) {return d;})
    .style("fill", color)
    .on('click', function(d) {isolateLine(d)});
  key.append("text")
    .attr("x", 75)
    .attr("y", 10)
    .attr("dy", 20)
    .text(function(d) { return d; }); 
  }
}

// Toggle the isolation of a single metro line when it's clicked in the key
function isolateLine(d) {
  var node = d3.selectAll(".node");
  var link = d3.selectAll(".link");
  // If no line is selected, isolate the line that was just clicked (d)
  if (iso_toggle==0) {
    var edges = metro_lines[d];
    node.transition().style("fill-opacity", function (o) {
        return o.lines.indexOf(d) > -1 || isInterchange(o)? 1 : 0.1;
    }).style("stroke-opacity", function (o) {
        return o.lines.indexOf(d) > -1 ? 1 : 0.05;
    }).duration(700);
    link.transition().style("opacity", function (o) {
        return o.line == d? 1 : 0.1;
    }).duration(700);
  } else { // Reset everything
    node.transition().duration(700).style("fill-opacity", 1).style("stroke-opacity", 1);
    link.transition().duration(700).style("opacity", 1);
  }
  force.start();
  force.tick(); // All the nodes are fixed so without calling tick(), start() won't work
  force.stop();
  iso_toggle = 1-iso_toggle;
}

// Let the nodes move around a bit and then forceably pause them
// To-do: polling until octilinearity/LS are suitably low, then doing force.alpha(0) breaks things
// but until then we have to have a hard time limit which performs badly sometimes
function move(time) {
  for (var n=0; n<graph.nodes.length; n++) {
    graph.nodes[n].fixed = false;
  }
  force.start();
  window.setTimeout(function(){
  // Wait some completely arbitraty amount of time before 'pausing'
    force.alpha(0);
    for (var n=0; n<graph.nodes.length; n++) {
      graph.nodes[n].fixed = true;
    }
  }, time);
};

// Still not sure whether it's correct to use .x or .px here, like, at all.
function getMetrics(graph, spacing) {
  var metrics = { x_min: width, x_max: 0,
                  y_min: height, y_max: 0,
                  x_avg: 0, y_avg: 0,
                  v_scale: 0, h_scale: 0 };

  metrics.x_min = Math.min.apply(null, graph.nodes.map(function(d) {return d.px;}));
  metrics.y_min = Math.min.apply(null, graph.nodes.map(function(d) {return d.py;}));
  metrics.x_max = Math.max.apply(null, graph.nodes.map(function(d) {return d.px;}));
  metrics.y_max = Math.max.apply(null, graph.nodes.map(function(d) {return d.py;}));

  metrics.x_avg = (metrics.x_min+metrics.x_max)/2.0;
  metrics.y_avg = (metrics.y_min+metrics.y_max)/2.0;

  metrics.v_scale = Math.abs(metrics.y_max - metrics.y_min)/(height-2*spacing);
  metrics.h_scale = Math.abs(metrics.x_max - metrics.x_min)/(height-2*spacing); // Deliberate
  metrics.x_move = (metrics.x_min*metrics.v_scale)/2.0;
  metrics.y_move = (metrics.y_min*metrics.h_scale)/2.0;

  return metrics;
}

function exportPositions() {
  positions = [];
  for (var n=0; n<graph.nodes.length; n++) {
    positions[n] = {"x": graph.nodes[n].x, "y": graph.nodes[n].y};
  }
  return JSON.stringify(positions);
}

function importPositions(positions) {
  for (var n=0; n<graph.nodes.length; n++) {
    graph.nodes[n].x = positions[n].x; graph.nodes[n].px = positions[n].x;
    graph.nodes[n].y = positions[n].y + 10; graph.nodes[n].py = positions[n].y + 10;
  }
  force.start();
  force.tick();
  force.stop();
}

function octilineariseLine(li, begin, end, dir) {
  let l = metro_lines[li];
  let line = {x: end.px-begin.px, y: end.py-begin.py};
  let theta = Math.atan(line.y/line.x);
  let nearest = Math.ceil(theta/(Math.PI/4)) * (Math.PI/4);
  if (dir == 1) { // line coming inwards, move 'begin'
    if (Math.round(Math.abs(nearest), 2) == 2 || nan(Math.tan(nearest))) {
      begin.py += linelength(begin, end);
    } else {
      begin.py += line.x * (Math.tan(nearest) - Math.tan(theta));
    }
  } else { // line going outwards, move 'end'
    if (Math.round(Math.abs(nearest), 2) == 2 || nan(Math.tan(nearest))) {
      end.py += linelength(begin, end);
    } else {
      end.py += line.x * (Math.tan(nearest) - Math.tan(theta));
    }
  }
  return {b:begin, e:end};
}

// start and stop are inclusive
function spaceAlongLine(l, start, stop, dir) {
  for (var n=0; n<graph.nodes.length; n++) {
    graph.nodes[n].px = graph.nodes[n].x;
    graph.nodes[n].py = graph.nodes[n].y;
  }
  var line = metro_lines[l];
  let real_begin = start==0? graph.nodes[line[0][0]]: graph.nodes[line[start-1][1]];
  let real_end = graph.nodes[line[stop-1][1]];
  oct = octilineariseLine(l, real_begin, real_end, dir);
  let begin = oct.b;
  let end = oct.e;
  
  let delta = dist2d(begin, end);
  delta.x = Math.ceil(delta.x/(stop-start+1));
  delta.x = (Math.abs(3*delta.x) < spacing)? delta.x*2: (Math.abs(delta.x)>spacing)? delta.x/1.5: delta.x;
  delta.y = Math.ceil(delta.y/(stop-start));
  delta.y = (Math.abs(3*delta.y) < spacing)? delta.y*2: (Math.abs(delta.y)>spacing)? delta.y/1.5: delta.y;

  for (var s=start; s<=stop; s++) {
    let station = s==0? graph.nodes[line[0][0]]: graph.nodes[line[s-1][1]];
    station.x = begin.px + (s-start)*delta.x;
    station.y = begin.py + (s-start)*delta.y;
    station.px = station.x;
    station.py = station.y;
  }
}

// Snap nodes to the grid so that hopefully most of them are drawn octilinearly
// in a discrete point space then do some line straightening and hope for the best
function snap(){
  force.stop();
  var metrics = getMetrics(graph, spacing);

  // This is the snap to grid part, we don't care about collisions yet so
  // don't mark anything as placed or unplaced
  for (var n=0; n<graph.nodes.length; n++) {
    let node = graph.nodes[n];
    node.x = (node.x/metrics.h_scale);
    node.y = (node.y/metrics.v_scale);
    c = { x: Math.ceil(node.x/spacing) * spacing,
          y: Math.ceil(node.y/spacing) * spacing};
    node.x = c.x; node.px = c.x;
    node.y = c.y; node.py = c.y;
  }

  metrics = getMetrics(graph, spacing);

  // We want to place stations in order of descending weight to keep the busy map sections clean
  var st = Object.keys(graph.nodes).sort(function(a,b){return graph.nodes[b].weight-graph.nodes[a].weight})
  // Try and place nodes if they can be snapped, otherwise nodes can bump each other off if they are closer
  for (var n of st) {
    let node = graph.nodes[n];
    node.x = (node.x) * (1.0/metrics.h_scale) - metrics.x_move;
    node.y = (node.y) * (1.0/metrics.v_scale) - metrics.y_move;

    c = { x: Math.ceil((node.x+metrics.x_avg)/spacing) * spacing,
          y: Math.ceil((node.y+metrics.y_avg)/spacing) * spacing};

    if (!taken[coordinates(c)]){
      taken[coordinates(c)] = node;
      node.placed = true;
      node.x, node.px = c.x, c.x;
      node.y, node.py = c.y, c.y;  
    } else if (taken[coordinates(c)] && dist2d(node, c) < dist2d(taken[coordinates(c)], c)) {
      let old = taken[coordinates(c)];
      old.placed = false;
      taken[coordinates(c)] = node;
      node.placed = true;
      node.x, node.px = c.x, c.x;
      node.y, node.py = c.y, c.y;
    }
  }

  // If we have: (a)  x  (c) [where ac is octilinear, and b has no other links]
  //               \     /
  //                \   /
  //                 (b) 
  // Transform this into: (a)--(b)--(c) [as long as x is not taken]

  for (var line in metro_lines) {
    line = metro_lines[line];
    for (var s=1; s<line.length; s++) {
      let a=graph.nodes[line[s-1][0]];
      let b=graph.nodes[line[s][0]];
      let c=graph.nodes[line[s][1]];
      let candidate = {x:(a.px+c.px)/2.0, y:(a.py+c.py)/2.0};

      if (octilinear(a, c) && b.weight <= 2 && !taken[coordinates(candidate)])  {
        taken[coordinates(b)] = false;
        taken[coordinates(candidate)] = b;
        b.x, b.px = candidate.x, candidate.x;
        b.y, b.py = candidate.y, candidate.y;
        b.placed = true;
      }
    }
  }
  // I'm not even sure why this is needed but like, it really is.
  for (var n=0; n<graph.nodes.length; n++) {
    graph.nodes[n].px = graph.nodes[n].x;
    graph.nodes[n].py = graph.nodes[n].y;
  }

  // If we have: (a)  x  (c) [where ac is octilinear, and b has no other links]
  //               \     /
  //                \   /
  //                 (b) 
  // Transform this into: (a)--(b)--(c) 
  // [EVEN IF x IS TAKEN OR B IS PLACED ALREADY]

  for (var line in metro_lines) {
    line = metro_lines[line];
    for (var s=line.length-1; s>0; s--) {
      let a=graph.nodes[line[s][1]];
      let b=graph.nodes[line[s-1][1]];
      let c=graph.nodes[line[s-1][0]];
      let candidate = {x:(a.px+c.px)/2.0, y:(a.py+c.py)/2.0};

      if (octilinear(a, c) && b.weight == 2)  {
        taken[coordinates(b)] = false;
        taken[coordinates(candidate)] = b;
        b.x = candidate.x; b.px = candidate.x;
        b.y = candidate.y; b.py = candidate.y;
        b.placed = true;
      }
    }
  }

  // If we have: (a)          [where b has not been placed]
  //               \     
  //                \   
  //                 (b)--(c) 
  //
  // Transform this into: (a)
  //                        \     
  //                        (b)
  //                          \
  //                          (c) 
  // [EVEN IF AC NOT OCTILINEAR OR B IS ON OTHER LINES]

  for (var line in metro_lines) {
  line = metro_lines[line];
    for (var s=1; s<line.length; s++) {
      let a=graph.nodes[line[s-1][0]];
      let b=graph.nodes[line[s][0]];
      let c=graph.nodes[line[s][1]];
      let candidate = {x:(a.px+c.px)/2.0, y:(a.py+c.py)/2.0}; 

      if (!b.placed)  {
        taken[coordinates(b)] = false;
        taken[coordinates(candidate)] = b;
        b.x, b.px = candidate.x, candidate.x;
        b.y, b.py = candidate.y, candidate.y;
        a.placed = true;
        b.placed = true;
        c.placed = true;
      }
    }
  }

  var metrics = getMetrics(graph, spacing);

  // We've moved around a lot so the map probably need rescaling & recentering
  for (var n=0; n<graph.nodes.length; n++) {
    let node = graph.nodes[n];
    node.x = (node.px) * (1.0/metrics.h_scale);
    node.y = (node.py) * (1.0/metrics.v_scale);
    node.px = node.x;
    node.py = node.y;
  }

  // Headcount; how many stations couldn't we place?
  taken = {};
  for (var n=0; n<graph.nodes.length; n++) {
    if (taken[coordinates(graph.nodes[n])]) {
      taken[coordinates(graph.nodes[n])] = 1;
    } else {
      taken[coordinates(graph.nodes[n])] = 1;
    }
  }
  force.start();
  console.debug("octilinearity:", octilinearity());
  console.debug("lineStraightness:", lineStraightness());
}

// This will fail if any link has the same source and target co-ordinates
var octilinearity = function(){
  var total = 0;
  for (var n=0; n<graph.links.length; n++) {
      let s = graph.links[n].source;
      let t = graph.links[n].target;
      let theta = 4*Math.atan(Math.abs((s.py-t.py)/(s.px-t.px)));
      total += Math.abs(Math.sin(theta));
    }
  return total;
}

// This will fail if basically any points are drawn on top of each other
var lineStraightness = function(){
  var total = 0;
  for (var line in metro_lines) {
    line = metro_lines[line];
    for (var s=0; s<line.length-1; s++) {
      let a = graph.nodes[line[s][0]];
      let b = graph.nodes[line[s+1][0]];
      let c = graph.nodes[line[s+1][1]];
      let v1 = {x:a.px - b.px, y:a.py - b.py};
      let v2 = {x:c.px - b.px, y:c.py - b.py};

      var v1mag = Math.sqrt(v1.x * v1.x + v1.y * v1.y);
      var v2mag =  Math.sqrt(v2.x * v2.x + v2.y * v2.y);
      var v1norm = {x:v1.x / v1mag, y:v1.y / v1mag};
      var v2norm = {x:v2.x / v2mag, y:v2.y / v2mag};
      
      var res = (v1norm.x * v2norm.x + v1norm.y * v2norm.y);
      // Make sure we don't NaN on e.g. acos(1.0000000000002)
      res = Math.round(res * 100) / 100;
      var theta = Math.acos(res);
      total+= theta;
    }
  }
  return total;
}

move(2000);
setTimeout(function(){
  snap();
  importPositions(pos);
}, 2500);

function timeSince(date) {
    var seconds = Math.floor((new Date() - date) / 1000);
    var interval = Math.floor(seconds / 31536000);

    if (interval > 1) {
        return interval + " years";
    }
    interval = Math.floor(seconds / 2592000);
    if (interval > 1) {
        return interval + " months";
    }
    interval = Math.floor(seconds / 86400);
    if (interval > 1) {
        return interval + " days";
    }
    interval = Math.floor(seconds / 3600);
    if (interval > 1) {
        return interval + " hours";
    }
    interval = Math.floor(seconds / 60);
    if (interval > 1) {
        return interval + " minutes";
    }
    return Math.floor(seconds) + " seconds";
}

function showArticle(data) {
  $('#article-container').get(0).innerHTML = "<h1>"+data.title+"</h1>"+"<h2>"+timeSince(data.date)+" ago</h2>"+ data.html;
    //`<h1>${data.title}</h1><h2>${data.date}</h2><img src='${data.img}'/>`
}

$('#graphPane').click(function() {
  $("#cards").hide();
  $('#feedPane').removeClass("active");
  $("#graph").show();
  $("#article-container").show();
  $("body")[0].style.overflow = "hidden";
  $('#graphPane').addClass("active");
});

$("#feedPane").click(function() {
  $("#graph").hide();
  $("#article-container").hide();
  $('#graphPane').removeClass("active");
  $("#cards").show();
  $("body")[0].style.overflow = "scroll";
  $('#feedPane').addClass("active");
});

//  $("#graphPane").trigger("click");
// drawGraph(graph);
// var pos = [{"x":288.375,"y":553.5},{"x":288.375,"y":461.25},{"x":288.375,"y":369},{"x":380.625,"y":369},{"x":472.875,"y":369},{"x":472.875,"y":461.25},{"x":472.875,"y":553.5},{"x":472.875,"y":645.75},{"x":841.875,"y":369},{"x":841.875,"y":415.125},{"x":841.875,"y":461.25},{"x":749.625,"y":553.5},{"x":657.375,"y":553.5},{"x":334.5,"y":322.875},{"x":380.625,"y":276.75},{"x":472.875,"y":276.75},{"x":565.125,"y":276.75},{"x":565.125,"y":369},{"x":565.125,"y":461.25},{"x":565.125,"y":553.5},{"x":380.625,"y":461.25},{"x":749.625,"y":369},{"x":657.375,"y":369},{"x":657.375,"y":184.5},{"x":749.625,"y":184.5},{"x":841.875,"y":184.5},{"x":565.125,"y":92.25},{"x":472.875,"y":184.5},{"x":380.625,"y":184.5},{"x":425.875,"y":320.75},{"x":519.125,"y":414}];

</script>
  </body>
</html>
