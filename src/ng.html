<?xml version='1.0' encoding='ISO-8859-1'?>
<!DOCTYPE html>
<html>
  <head>
    <title>NewsGraph</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.0/css/materialize.min.css" type="text/css" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" type="text/css" rel="stylesheet"/>
    <script src="http://d3js.org/d3.v2.min.js?2.9.6"></script>
    <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
    <script src="http://code.jquery.com/ui/1.11.0/jquery-ui.min.js"></script>
    <style>body {
	overflow: none;
}

.header {
 padding: 5px;
 font-size: 2em;
}

h4 {
	font-size: 1.5em !important;
}

.nav-wrapper {
	z-index: 999 !important;
 	position: relative;
 	box-shadow: none;
}

.nav-wrapper:before {
    position: absolute;
    left: 0px;
    top: 0px;
    right: 0px;
    bottom: 0px;
    box-shadow: 0 2px 5px 0 rgba(0,0,0,0.16), 0 2px 10px 0 rgba(0,0,0,0.12);
    pointer-events: none;
    content:"";
}

.node circle {
 stroke: #000;
 stroke-width: 4px;
}

.link {
  fill: none;
  stroke-width: 7px;
}

.search {
	position: absolute;
	top: 150px;
	text-align: middle;
}

#searchbox {
	display: inline-block;
}

#searchbutton {
	display: inline-block;
}

.card {
	margin: 10px;
}

.card img {
	height: 200px;
}

#cards {
	margin-top: 20px;
	overflow: scroll;
}

.card-title {
	font-size: 1.4em !important;
	line-height: 1.2em !important;
}

#graph {
	margin: 0px;
	border: 0px;
	overflow: none;
}

#article-container {
	position: fixed;
	z-index: 1 !important;
	top: 0px;
	bottom: 0px;
	right: 0px;
	width: 30%;	
	padding: 10px;
	padding-top: 70px;							
    background: #eff0f1;	
    border: 0px;
    margin:0px;	
    box-shadow: -2px 2px 5px 0 rgba(0,0,0,0.16), -2px 2px 10px 0 rgba(0,0,0,0.12);
    overflow: scroll;
    display: none;
}

#article-container img {
	overflow: none;
}

#article-container h1 {
	font-size: 2em;
	line-height: 110%;
}

#article-container h2 {
	font-size: 1.2em;
	font-style: italic;
}

img.js-image-replace {
	height: inherit !important;
	width: inherit !important;

}
</style>
  </head>
  <body>
    <nav>
      <div class="nav-wrapper yellow darken-3">
        <span class="brand-logo center">NewsGraph</span>
        <ul id="nav-mobile" class="right hide-on-med-and-down">
          <li id="graphPane" class="active">
            <a href="#">Graph</a>
          </li>
          <li id="feedPane">
            <a href="#">Feed</a>
          </li>
        </ul>
      </div>
    </nav>
    <div id="cards">
      <div class="card horizontal Donald-Trump Centers-for-Medicare-and-Medicaid-Services">
        <div class="card-image">
          <img src="https://i.guim.co.uk/img/media/3d54c2b0a5b431a7c5d7b50bd97c8ce6e9018c18/0_134_3500_2101/master/3500.jpg?w=1200&amp;h=630&amp;q=55&amp;auto=format&amp;usm=12&amp;fit=crop&amp;crop=faces%2Centropy&amp;bm=normal&amp;ba=bottom%2Cleft&amp;blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&amp;s=0498010f802e06874f9e4121509e2c80"/>
        </div>
        <div class="card-stacked">
          <div class="card-content">
            <h4>Louisville loyalists lap up Trump line on healthcare but Congress is a harder sell</h4>
            <p>Kentucky, where the president held a rally for 18,000 people, has done well out of Obamacare and is home to a Republican senator fighting the bill to replace it</p>
          </div>
          <div class="card-action">Tue Mar 21 17:53:10 2017 - <a href="/#">Read more at US news | The Guardian</a></div>
        </div>
      </div>
      <div class="card horizontal Donald-Trump Federal-Bureau-of-Investigation Russia">
        <div class="card-image">
          <img src="https://i.guim.co.uk/img/media/bc8d1362624c4781bde5df889181a046f8f9fe1f/0_202_2200_1319/master/2200.jpg?w=1200&amp;h=630&amp;q=55&amp;auto=format&amp;usm=12&amp;fit=crop&amp;crop=faces%2Centropy&amp;bm=normal&amp;ba=bottom%2Cleft&amp;blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&amp;s=e3314b60383adfe5e3fb6fc7f6d75476"/>
        </div>
        <div class="card-stacked">
          <div class="card-content">
            <h4>What is James Comey&#8217;s game? The media must expose the truth together</h4>
            <p>Why did Hillary Clinton&#8217;s emails supposedly warrant an FBI intervention in the election campaign, yet Donald Trump&#8217;s Russian connections didn&#8217;t?</p>
          </div>
          <div class="card-action">Tue Mar 21 18:26:00 2017 - <a href="/#">Read more at US news | The Guardian</a></div>
        </div>
      </div>
      <div class="card horizontal Janet-Yellen">
        <div class="card-image">
          <img src="https://i.guim.co.uk/img/media/686704ddde3fa3e383e36a491ab51cba26c00a7f/0_125_4792_2876/master/4792.jpg?w=1200&amp;h=630&amp;q=55&amp;auto=format&amp;usm=12&amp;fit=crop&amp;crop=faces%2Centropy&amp;bm=normal&amp;ba=bottom%2Cleft&amp;blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&amp;s=2a528dbbf18a2a0d9b38404695ea78b1"/>
        </div>
        <div class="card-stacked">
          <div class="card-content">
            <h4>US interest rate rise signals end of ultra-low borrowing costs</h4>
            <p>Fed boss Janet Yellen wants the rates to hit the new normal so expect two more hikes this year</p>
          </div>
          <div class="card-action">Wed Mar 15 19:31:25 2017 - <a href="/#">Read more at US news | The Guardian</a></div>
        </div>
      </div>
      <div class="card horizontal Barack-Obama">
        <div class="card-image">
          <img src="https://i.guim.co.uk/img/media/5e28bf6cdeb5daa087d4000042c70b55d33b2ed9/0_94_4500_2700/master/4500.jpg?w=1200&amp;h=630&amp;q=55&amp;auto=format&amp;usm=12&amp;fit=crop&amp;crop=faces%2Centropy&amp;bm=normal&amp;ba=bottom%2Cleft&amp;blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&amp;s=893367b575b1ff2fb7058140ecc02b9a"/>
        </div>
        <div class="card-stacked">
          <div class="card-content">
            <h4>Trump must convert surging US confidence into real growth</h4>
            <p>The exuberant market reaction to his win has not been translated into progress &#8211; he must work with Congress to deliver</p>
          </div>
          <div class="card-action">Mon Mar 20 20:09:50 2017 - <a href="/#">Read more at US news | The Guardian</a></div>
        </div>
      </div>
      <div class="card horizontal Janet-Yellen">
        <div class="card-image">
          <img src="https://i.guim.co.uk/img/media/ca97ce07edfbed55199496361959837a4b904fb3/0_510_3802_2281/master/3802.jpg?w=1200&amp;h=630&amp;q=55&amp;auto=format&amp;usm=12&amp;fit=crop&amp;crop=faces%2Centropy&amp;bm=normal&amp;ba=bottom%2Cleft&amp;blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&amp;s=33a66d92481375370712e77a3aa5c906"/>
        </div>
        <div class="card-stacked">
          <div class="card-content">
            <h4>The Ronald, the Donald &#8211; and a hamstrung Hammond</h4>
            <p>Though he talked tax cuts, Ronald Reagan in fact turned on the public spending taps, to great effect at home and harm abroad. But 2017 is hardly 1981</p>
          </div>
          <div class="card-action">Sun Mar 19 06:59:01 2017 - <a href="/#">Read more at US news | The Guardian</a></div>
        </div>
      </div>
      <div class="card horizontal DHS">
        <div class="card-image">
          <img src="https://i.guim.co.uk/img/media/af639337d0a1db38a318b56b5ae556b195595b1d/0_49_3780_2268/master/3780.jpg?w=1200&amp;h=630&amp;q=55&amp;auto=format&amp;usm=12&amp;fit=crop&amp;crop=faces%2Centropy&amp;bm=normal&amp;ba=bottom%2Cleft&amp;blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&amp;s=0f1a8fa87653b0c6e26c7a3d8b35d7f1"/>
        </div>
        <div class="card-stacked">
          <div class="card-content">
            <h4>US bans larger electronic devices on some flights from Middle East</h4>
            <p>New TSA requirement blocks passengers from bringing laptops, iPads, Kindles and cameras, with a lack of specifics on whether flight crews are included in rule</p>
          </div>
          <div class="card-action">Mon Mar 20 20:13:47 2017 - <a href="/#">Read more at US news | The Guardian</a></div>
        </div>
      </div>
      <div class="card horizontal DHS">
        <div class="card-image">
          <img src="https://i.guim.co.uk/img/media/3d495cd4188c6797db7e7b3dde9d9c053bef0f83/0_77_4128_2477/master/4128.jpg?w=1200&amp;h=630&amp;q=55&amp;auto=format&amp;usm=12&amp;fit=crop&amp;crop=faces%2Centropy&amp;bm=normal&amp;ba=bottom%2Cleft&amp;blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&amp;s=58ad63d29e3d7c5f4e9a12e3e23039fb"/>
        </div>
        <div class="card-stacked">
          <div class="card-content">
            <h4>US electronics ban for Middle East flights endangers passengers for profit</h4>
            <p>Holding many large devices with lithium-ion batteries in cargo could create fire risk that has downed airplanes, as directive only affects foreign-owned carriers</p>
          </div>
          <div class="card-action">Tue Mar 21 19:45:07 2017 - <a href="/#">Read more at US news | The Guardian</a></div>
        </div>
      </div>
      <div class="card horizontal Bastian-Schweinsteiger">
        <div class="card-image">
          <img src="https://i.guim.co.uk/img/media/0da35e5e2368fa4160636eb1571524dcc59670b3/0_226_3648_2187/master/3648.jpg?w=1200&amp;h=630&amp;q=55&amp;auto=format&amp;usm=12&amp;fit=crop&amp;crop=faces%2Centropy&amp;bm=normal&amp;ba=bottom%2Cleft&amp;blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&amp;s=d76fb6ed420c530aaa214a29bc0e8956"/>
        </div>
        <div class="card-stacked">
          <div class="card-content">
            <h4>Bastian Schweinsteiger joins Chicago Fire from Manchester United</h4>
            <p>The former Germany midfielder has left to play in the MLS after being sidelined at Old Trafford</p>
          </div>
          <div class="card-action">Tue Mar 21 08:24:59 2017 - <a href="/#">Read more at US news | The Guardian</a></div>
        </div>
      </div>
      <div class="card horizontal Bastian-Schweinsteiger">
        <div class="card-image">
          <img src="https://i.guim.co.uk/img/media/c010ce2fc3751d642c510c9d33d5778757767435/0_207_3500_2100/master/3500.jpg?w=1200&amp;h=630&amp;q=55&amp;auto=format&amp;usm=12&amp;fit=crop&amp;crop=faces%2Centropy&amp;bm=normal&amp;ba=bottom%2Cleft&amp;blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&amp;s=c1b941fa413d3a72734f0c5aea4f3b20"/>
        </div>
        <div class="card-stacked">
          <div class="card-content">
            <h4>Bastian Schweinsteiger leaves Manchester United for Chicago Fire &#8211; video report</h4>
            <p>Midfielder Bastian Schweinsteiger is leaving Manchester United to join Major League Soccer side Chicago Fire in a one-year deal reportedly worth £3.6m</p>
          </div>
          <div class="card-action">Tue Mar 21 15:09:40 2017 - <a href="/#">Read more at US news | The Guardian</a></div>
        </div>
      </div>
      <div class="card horizontal White-House">
        <div class="card-image">
          <img src="https://i.guim.co.uk/img/media/3dfedc4948b1c6d50cf85364cd04f03ccfb70635/0_69_594_356/master/594.jpg?w=1200&amp;h=630&amp;q=55&amp;auto=format&amp;usm=12&amp;fit=crop&amp;crop=faces%2Centropy&amp;bm=normal&amp;ba=bottom%2Cleft&amp;blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&amp;s=80948b33e10cc87eb32ceac2e0bc70e1"/>
        </div>
        <div class="card-stacked">
          <div class="card-content">
            <h4>Leader of group widely identified as anti-Muslim meets with White House</h4>
            <p>Brigitte Gabriel of Act for America, which has been classified as a hate group, posted photos from her visit and asked supporters what topics to address</p>
          </div>
          <div class="card-action">Wed Mar 22 01:11:25 2017 - <a href="/#">Read more at US news | The Guardian</a></div>
        </div>
      </div>
      <div class="card horizontal White-House Federal-Bureau-of-Investigation Russia">
        <div class="card-image">
          <img src="https://i.guim.co.uk/img/media/d4be646391d0fa1c2e64f06b2b2a6530546e0a80/0_128_4500_2699/master/4500.jpg?w=1200&amp;h=630&amp;q=55&amp;auto=format&amp;usm=12&amp;fit=crop&amp;crop=faces%2Centropy&amp;bm=normal&amp;ba=bottom%2Cleft&amp;blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&amp;s=eaae35585d5686acb8af6e2f67fe0013"/>
        </div>
        <div class="card-stacked">
          <div class="card-content">
            <h4>The Guardian view of Trump&#8217;s Russia links: a lot to go at</h4>
            <p>Why days before the presidential election did the FBI announce it was reopening an investigation into Hillary Clinton &#8211; when it was silent about its probe into Mr Trump&#8217;s Russia ties?</p>
          </div>
          <div class="card-action">Mon Mar 20 20:17:26 2017 - <a href="/#">Read more at US news | The Guardian</a></div>
        </div>
      </div>
      <div class="card horizontal DHS">
        <div class="card-image">
          <img src="https://i.guim.co.uk/img/media/932e9cf360a08c601c5b7f24597db2092c877be8/0_0_5616_3370/master/5616.jpg?w=1200&amp;h=630&amp;q=55&amp;auto=format&amp;usm=12&amp;fit=crop&amp;crop=faces%2Centropy&amp;bm=normal&amp;ba=bottom%2Cleft&amp;blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&amp;s=02ff6351146c385ff888d551f963e64f"/>
        </div>
        <div class="card-stacked">
          <div class="card-content">
            <h4>Experts criticize US electronic devices ban on some flights from Middle East</h4>
            <p>Technologists say new rules against electronics &#8216;larger than a cellphone&#8217; on flights from 10 airports seem illogical and at odds with basic computer science</p>
          </div>
          <div class="card-action">Tue Mar 21 13:15:48 2017 - <a href="/#">Read more at US news | The Guardian</a></div>
        </div>
      </div>
      <div class="card horizontal Russia">
        <div class="card-image">
          <img src="https://i.guim.co.uk/img/media/46274421f2ee86fc56d2a6549024d168ebd49f83/0_182_4500_2700/master/4500.jpg?w=1200&amp;h=630&amp;q=55&amp;auto=format&amp;usm=12&amp;fit=crop&amp;crop=faces%2Centropy&amp;bm=normal&amp;ba=bottom%2Cleft&amp;blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&amp;s=9a7993656b6c44af0b53fb9ed61f2bf3"/>
        </div>
        <div class="card-stacked">
          <div class="card-content">
            <h4>House committee grills Comey and Rogers on Trump and Russia: key points</h4>
            <p>FBI director confirms investigation of Trump campaign&#8217;s ties to Russian government and smacks down several of the president&#8217;s tweets</p>
          </div>
          <div class="card-action">Mon Mar 20 21:10:33 2017 - <a href="/#">Read more at US news | The Guardian</a></div>
        </div>
      </div>
      <div class="card horizontal Donald-Trump Barack-Obama Federal-Bureau-of-Investigation James-Comey">
        <div class="card-image">
          <img src="https://i.guim.co.uk/img/media/c9fd67695901b6ecfafbe8dc1eb613b2f2770643/0_58_5807_3483/master/5807.jpg?w=1200&amp;h=630&amp;q=55&amp;auto=format&amp;usm=12&amp;fit=crop&amp;crop=faces%2Centropy&amp;bm=normal&amp;ba=bottom%2Cleft&amp;blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&amp;s=c5c3701a8aa576716f1e19186bf13ea1"/>
        </div>
        <div class="card-stacked">
          <div class="card-content">
            <h4>No evidence of Trump wiretapping claim, says FBI director &#8211; video</h4>
            <p>James Comey says that neither the Department of Justice nor his own agency had evidence to support a claim that Trump Tower had been wiretapped</p>
          </div>
          <div class="card-action">Mon Mar 20 16:45:54 2017 - <a href="/#">Read more at US news | The Guardian</a></div>
        </div>
      </div>
      <div class="card horizontal Centers-for-Medicare-and-Medicaid-Services">
        <div class="card-image">
          <img src="https://i.guim.co.uk/img/media/6e1dd804d8c42e1d976c3f72cb8cf14034caabba/0_218_4256_2553/master/4256.jpg?w=1200&amp;h=630&amp;q=55&amp;auto=format&amp;usm=12&amp;fit=crop&amp;crop=faces%2Centropy&amp;bm=normal&amp;ba=bottom%2Cleft&amp;blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&amp;s=835c07f2ac726bfc942d93a14e625c6a"/>
        </div>
        <div class="card-stacked">
          <div class="card-content">
            <h4>Trump supporters in the heartland fear being left behind by GOP health plan</h4>
            <p>Republican proposal would upend a healthcare system in Indiana that covers many low-income people &#8211; in a program that Mike Pence put in place</p>
          </div>
          <div class="card-action">Sun Mar 12 11:00:01 2017 - <a href="/#">Read more at US news | The Guardian</a></div>
        </div>
      </div>
      <div class="card horizontal Donald-Trump Federal-Bureau-of-Investigation James-Comey">
        <div class="card-image">
          <img src="https://i.guim.co.uk/img/media/bfebf30911446a289e7959eebcb294dc77279c68/0_288_4726_2836/master/4726.jpg?w=1200&amp;h=630&amp;q=55&amp;auto=format&amp;usm=12&amp;fit=crop&amp;crop=faces%2Centropy&amp;bm=normal&amp;ba=bottom%2Cleft&amp;blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&amp;s=d4df16603f01ee8bab7e9f4dd3ebc941"/>
        </div>
        <div class="card-stacked">
          <div class="card-content">
            <h4>What we learned from the hearing on the Trump campaign's Russia ties</h4>
            <p>FBI director James Comey confirmed investigation began in July while NSA&#8217;s Michael Rogers said baseless spying claim has strained UK relations</p>
          </div>
          <div class="card-action">Tue Mar 21 01:02:19 2017 - <a href="/#">Read more at US news | The Guardian</a></div>
        </div>
      </div>
      <div class="card horizontal Donald-Trump">
        <div class="card-image">
          <img src="https://i.guim.co.uk/img/media/9ddffc13603b5f4ddf257fe4c8e7023f323bb208/443_408_2597_1558/master/2597.jpg?w=1200&amp;h=630&amp;q=55&amp;auto=format&amp;usm=12&amp;fit=crop&amp;crop=faces%2Centropy&amp;bm=normal&amp;ba=bottom%2Cleft&amp;blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&amp;s=801ff9584538b215f40582694a8b1521"/>
        </div>
        <div class="card-stacked">
          <div class="card-content">
            <h4>Will Trump be impeached &#8211; or is it just a liberal fantasy?</h4>
            <p>Only two presidents in history have been impeached, but murmurs continue to surround Trump. Here&#8217;s how the process would work &#8211; if it would at all</p>
          </div>
          <div class="card-action">Wed Mar 22 07:30:19 2017 - <a href="/#">Read more at US news | The Guardian</a></div>
        </div>
      </div>
      <div class="card horizontal Donald-Trump Russia">
        <div class="card-image">
          <img src="https://i.guim.co.uk/img/media/f4775cca286bc8069ff6472c7386b5d64aa2756d/0_156_3990_2394/master/3990.jpg?w=1200&amp;h=630&amp;q=55&amp;auto=format&amp;usm=12&amp;fit=crop&amp;crop=faces%2Centropy&amp;bm=normal&amp;ba=bottom%2Cleft&amp;blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&amp;s=55ea89b71a198dae328cc1aadbe0d107"/>
        </div>
        <div class="card-stacked">
          <div class="card-content">
            <h4>Trump stays silent on FBI's Russia investigation at Kentucky rally</h4>
            <p>The president spoke of NFL quarterbacks and healthcare reform but failed to mention James Comey&#8217;s testimony to Congress earlier in the day</p>
          </div>
          <div class="card-action">Tue Mar 21 01:38:36 2017 - <a href="/#">Read more at US news | The Guardian</a></div>
        </div>
      </div>
      <div class="card horizontal Donald-Trump Russia">
        <div class="card-image">
          <img src="https://i.guim.co.uk/img/media/fcba433174302e3a297cc30765c120f1010d17e3/0_0_3708_2225/master/3708.jpg?w=1200&amp;h=630&amp;q=55&amp;auto=format&amp;usm=12&amp;fit=crop&amp;crop=faces%2Centropy&amp;bm=normal&amp;ba=bottom%2Cleft&amp;blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&amp;s=bb859b2b8b79d7394d122ffaa13729af"/>
        </div>
        <div class="card-stacked">
          <div class="card-content">
            <h4>No, over there! Our case-by-case guide to the Trump distraction technique</h4>
            <p>Some sort of problem rocking your presidency? Simple &#8211; create a distraction! Adam Gabbatt explores Donald Trump&#8217;s apparent skills at changing the news</p>
          </div>
          <div class="card-action">Tue Mar 21 08:00:00 2017 - <a href="/#">Read more at US news | The Guardian</a></div>
        </div>
      </div>
      <div class="card horizontal Russia">
        <div class="card-image">
          <img src="https://i.guim.co.uk/img/media/a94bc6f622e70ec1eb039eb24a66179fd812d057/0_236_7212_4328/master/7212.jpg?w=1200&amp;h=630&amp;q=55&amp;auto=format&amp;usm=12&amp;fit=crop&amp;crop=faces%2Centropy&amp;bm=normal&amp;ba=bottom%2Cleft&amp;blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&amp;s=5582c7a507d3fa7078342b21eb227ba3"/>
        </div>
        <div class="card-stacked">
          <div class="card-content">
            <h4>Russia hearing: Comey says no information to confirm Trump's wiretap claims &#8211; as it happened</h4>
            <p>James Comey and Mike Rogers appear before the House intelligence panel while Trump&#8217;s supreme court pick Neil Gorsuch has a confirmation hearing</p>
          </div>
          <div class="card-action">Mon Mar 20 20:28:02 2017 - <a href="/#">Read more at US news | The Guardian</a></div>
        </div>
      </div>
      <div class="card horizontal Donald-Trump Federal-Bureau-of-Investigation James-Comey">
        <div class="card-image">
          <img src="https://i.guim.co.uk/img/media/f6c9dc75d010bdfadb1c0a1763ce586161b5a470/0_194_5472_3283/master/5472.jpg?w=1200&amp;h=630&amp;q=55&amp;auto=format&amp;usm=12&amp;fit=crop&amp;crop=faces%2Centropy&amp;bm=normal&amp;ba=bottom%2Cleft&amp;blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&amp;s=de4311450f51d79d521b2c588d707512"/>
        </div>
        <div class="card-stacked">
          <div class="card-content">
            <h4>Trump's false tweets on Russia corrected live at hearing &#8211; video</h4>
            <p>Trump&#8217;s inaccurate tweets about a congressional hearing on Russia&#8217;s alleged influence in the US elections were corrected in real time &#8212; at the hearing</p>
          </div>
          <div class="card-action">Mon Mar 20 20:18:51 2017 - <a href="/#">Read more at US news | The Guardian</a></div>
        </div>
      </div>
      <div class="card horizontal White-House">
        <div class="card-image">
          <img src="https://i.guim.co.uk/img/media/b430a04f8512dd41d9e9853c40a587cbf44e411d/0_139_3000_1800/master/3000.jpg?w=1200&amp;h=630&amp;q=55&amp;auto=format&amp;usm=12&amp;fit=crop&amp;crop=faces%2Centropy&amp;bm=normal&amp;ba=bottom%2Cleft&amp;blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&amp;s=f9baf525429dde70ba3c296bb8f640c7"/>
        </div>
        <div class="card-stacked">
          <div class="card-content">
            <h4>Ivanka Trump's expanded White House role raises ethical issues</h4>
            <p>With a West Wing office but no specific title &#8211; and no precedent for adult children whose father is president &#8211; the rules Trump is subject to are under dispute</p>
          </div>
          <div class="card-action">Tue Mar 21 19:21:34 2017 - <a href="/#">Read more at US news | The Guardian</a></div>
        </div>
      </div>
      <div class="card horizontal Janet-Yellen">
        <div class="card-image">
          <img src="https://i.guim.co.uk/img/media/9b4795582f473e5c8fdc3ca2409f4fabdfdd464b/0_809_2616_1569/master/2616.jpg?w=1200&amp;h=630&amp;q=55&amp;auto=format&amp;usm=12&amp;fit=crop&amp;crop=faces%2Centropy&amp;bm=normal&amp;ba=bottom%2Cleft&amp;blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&amp;s=426c9153419af37c4da51e87eceecdf9"/>
        </div>
        <div class="card-stacked">
          <div class="card-content">
            <h4>Federal Reserve chair Janet Yellen announces an interest rate increase &#8211; video</h4>
            <p>Federal Reserve chair Janet Yellen announces that the Federal Reserve would raise interest rates on Wednesday</p>
          </div>
          <div class="card-action">Wed Mar 15 21:02:29 2017 - <a href="/#">Read more at US news | The Guardian</a></div>
        </div>
      </div>
      <div class="card horizontal Donald-Trump">
        <div class="card-image">
          <img src="https://i.guim.co.uk/img/media/2f8595d5589314000b89bf8eac0bcb13d763d464/0_116_3500_2101/master/3500.jpg?w=1200&amp;h=630&amp;q=55&amp;auto=format&amp;usm=12&amp;fit=crop&amp;crop=faces%2Centropy&amp;bm=normal&amp;ba=bottom%2Cleft&amp;blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&amp;s=59bccf1b326287d28c8c81ca6671dd41"/>
        </div>
        <div class="card-stacked">
          <div class="card-content">
            <h4>I was sent Donald Trump's 2005 tax return. We need the rest &#8211; right now</h4>
            <p>Only the full release of his tax records can help shed light on whether Trump is a crook &#8211; or compromised</p>
          </div>
          <div class="card-action">Wed Mar 22 10:00:32 2017 - <a href="/#">Read more at US news | The Guardian</a></div>
        </div>
      </div>
      <div class="card horizontal Bastian-Schweinsteiger">
        <div class="card-image">
          <img src="https://i.guim.co.uk/img/media/b0182000823e431b8128fa821702e1a7185b8ed8/0_77_5520_3314/master/5520.jpg?w=1200&amp;h=630&amp;q=55&amp;auto=format&amp;usm=12&amp;fit=crop&amp;crop=faces%2Centropy&amp;bm=normal&amp;ba=bottom%2Cleft&amp;blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&amp;s=5ebaa6e0600235764d761148282f1146"/>
        </div>
        <div class="card-stacked">
          <div class="card-content">
            <h4>Schweinsteiger signing does little to dispel view of MLS as retirement home</h4>
            <p>Kristan Heneage: The Fire&#8217;s $4.5m move for the former German international seems to share many parallels with ill-fated veteran signings of the past</p>
          </div>
          <div class="card-action">Wed Mar 22 09:00:30 2017 - <a href="/#">Read more at US news | The Guardian</a></div>
        </div>
      </div>
      <div class="card horizontal Centers-for-Medicare-and-Medicaid-Services">
        <div class="card-image">
          <img src="https://i.guim.co.uk/img/media/e9dacd45416998969ec59ae5aa03b395f9c66d09/0_177_3500_2100/master/3500.jpg?w=1200&amp;h=630&amp;q=55&amp;auto=format&amp;usm=12&amp;fit=crop&amp;crop=faces%2Centropy&amp;bm=normal&amp;ba=bottom%2Cleft&amp;blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&amp;s=84378ddb12a9d7d3cceae69f5b530c4c"/>
        </div>
        <div class="card-stacked">
          <div class="card-content">
            <h4>Republicans unveil make-or-break bid to repeal and replace Obamacare</h4>
            <p>Revisions offer more generous tax credits for older people, earlier repeal of tax increases on higher earners and hand Medicaid powers to states</p>
          </div>
          <div class="card-action">Tue Mar 21 04:28:47 2017 - <a href="/#">Read more at US news | The Guardian</a></div>
        </div>
      </div>
      <div class="card horizontal Donald-Trump Federal-Bureau-of-Investigation Russia James-Comey">
        <div class="card-image">
          <img src="https://i.guim.co.uk/img/media/fb86c6dbed96b6b885ee8f5fbc1765d86f5c3d6e/0_127_3500_2100/master/3500.jpg?w=1200&amp;h=630&amp;q=55&amp;auto=format&amp;usm=12&amp;fit=crop&amp;crop=faces%2Centropy&amp;bm=normal&amp;ba=bottom%2Cleft&amp;blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&amp;s=623321fe5ec90c419ed2624347355dd8"/>
        </div>
        <div class="card-stacked">
          <div class="card-content">
            <h4>Donald Trump is under investigation for ties to Russia. What happens now?</h4>
            <p>Monday&#8217;s intelligence hearing highlighted the &#8216;big gray cloud&#8217; of suspicion hanging over the White House. Here&#8217;s what happened &#8211; and what to expect</p>
          </div>
          <div class="card-action">Wed Mar 22 07:31:01 2017 - <a href="/#">Read more at US news | The Guardian</a></div>
        </div>
      </div>
      <div class="card horizontal Barack-Obama">
        <div class="card-image">
          <img src="https://i.guim.co.uk/img/media/91946604f48ad59eff8ade36b61dfe00ec03bb3f/37_0_3426_2056/master/3426.jpg?w=1200&amp;h=630&amp;q=55&amp;auto=format&amp;usm=12&amp;fit=crop&amp;crop=faces%2Centropy&amp;bm=normal&amp;ba=bottom%2Cleft&amp;blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&amp;s=cc2b04d7f0d84befe3b1796330161033"/>
        </div>
        <div class="card-stacked">
          <div class="card-content">
            <h4>US diplomacy in crisis amid cuts and confusion at state department</h4>
            <p>Critics says America&#8217;s soft power could be dramatically diluted if it does not find a way to stop alienating allies around the world</p>
          </div>
          <div class="card-action">Wed Mar 22 10:30:32 2017 - <a href="/#">Read more at US news | The Guardian</a></div>
        </div>
      </div>
      <div class="card horizontal Donald-Trump">
        <div class="card-image">
          <img src="https://i.guim.co.uk/img/media/5cc0be80bb0803c6eeec645a6b7fb35bcf9ebf0a/0_0_1300_780/master/1300.jpg?w=1200&amp;h=630&amp;q=55&amp;auto=format&amp;usm=12&amp;fit=crop&amp;crop=faces%2Centropy&amp;bm=normal&amp;ba=bottom%2Cleft&amp;blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&amp;s=4cd4e21dab6e1a517746e625717f1fc7"/>
        </div>
        <div class="card-stacked">
          <div class="card-content">
            <h4>Donald Trump's first 100 days as president &#8211; daily updates</h4>
            <p>Follow daily updates on the 45th president of the United States as we track Trump one day at a time</p>
          </div>
          <div class="card-action">Mon Mar 20 11:44:30 2017 - <a href="/#">Read more at US news | The Guardian</a></div>
        </div>
      </div>
      <div class="card horizontal Centers-for-Medicare-and-Medicaid-Services">
        <div class="card-image">
          <img src="https://i.guim.co.uk/img/media/36352c43bf8fd2bfcf1681209090363cbd519131/0_0_3000_1800/master/3000.jpg?w=1200&amp;h=630&amp;q=55&amp;auto=format&amp;usm=12&amp;fit=crop&amp;crop=faces%2Centropy&amp;bm=normal&amp;ba=bottom%2Cleft&amp;blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&amp;s=0ff8a513f37bafd474abcbbabaa0842d"/>
        </div>
        <div class="card-stacked">
          <div class="card-content">
            <h4>24 hours in a Detroit ER: on the frontline of America's healthcare debate</h4>
            <p>Henry Ford hospital is one of the busiest in Michigan, and with many patients on Medicare and Medicaid it stands to be impacted greatly by an Obamacare repeal. As the debate rages, one doctor remains the calm at the center of the storm</p>
          </div>
          <div class="card-action">Wed Mar 22 10:00:32 2017 - <a href="/#">Read more at US news | The Guardian</a></div>
        </div>
      </div>
      <div class="card horizontal Donald-Trump Centers-for-Medicare-and-Medicaid-Services">
        <div class="card-image">
          <img src="https://i.guim.co.uk/img/media/b2ad45fee571dbd948bc0a378c555121d0684f49/0_186_3000_1800/master/3000.jpg?w=1200&amp;h=630&amp;q=55&amp;auto=format&amp;usm=12&amp;fit=crop&amp;crop=faces%2Centropy&amp;bm=normal&amp;ba=bottom%2Cleft&amp;blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&amp;s=6f7c6974888baca9376df9a26d38f570"/>
        </div>
        <div class="card-stacked">
          <div class="card-content">
            <h4>Trump twists arms on Capitol Hill as House Republicans waver on healthcare</h4>
            <p>Paul Ryan claimed president&#8217;s pitch will &#8216;close the deal&#8217; for Thursday&#8217;s vote but Freedom Caucus chairman said there is &#8216;more than enough&#8217; opposition to block</p>
          </div>
          <div class="card-action">Tue Mar 21 16:19:35 2017 - <a href="/#">Read more at US news | The Guardian</a></div>
        </div>
      </div>
    </div>
    <script>var width = window.innerWidth * 0.7, 
    height = window.innerHeight-60;

// How energetically is the map moving into position?
var energy;
// How many stations couldn't be positioned?
var unplaced = 0;
// Position hash
var taken = {};
// Size of one grid square
var spacing = height/8.0;
// Has a metro line on the key been clicked?
var iso_toggle = 0;

// Realistically more colours than we will ever need but I'm hesitant to go for a hard limit
var color = color = d3.scale.ordinal()
  .domain(50)
  .range(["#1596ff", "#ff6401", "#fef302", "#03aa4a", "#38d8ce", "#c38ce2", "#fd85b0", "#a78f7b", "#d8d8d8", "#374a91", "#48e268", "#ffa103", "#ff576d", "#66c1fe", "#97f1a0", "#3fc104", "#febbc0", "#8494ad", "#a1fe04", "#e0bb10"]);

var radius = d3.scale.sqrt().range([0, 6]);

var svg = d3.select("body")
    .append("svg")
    .attr("id", "graph")
    .attr("width", width)
    .attr("height", height)
    .attr("viewBox", "0 0 " + width + " " + height )
    .attr("preserveAspectRatio", "xMidYMid meet")
    .attr("pointer-events", "all");

var article_container = d3.select("body")
    .append("div")
    .attr("id", "article-container")
    .attr("width", window.innerWidth * 0.3)
    .attr("height", height);

var force = d3.layout.force()
    .size([width, height-60])
    .charge(function(d){
        // Nodes with higher weights will repel more strongly
        return d.weight == 1? -300: -500;
    })
    .linkDistance(function(d){
        return height/15;
    })
    .linkStrength(1)
    .friction(0.96)
    .gravity(0.15)
    .alpha(1);

// NG things get regex replaced with actual JSON by the python script, do not remove
var metro_lines = {"White House": [[0, 1], [1, 2]], "Bastian Schweinsteiger": [[3, 4], [4, 5]], "Donald Trump": [[6, 7], [7, 8], [8, 9], [9, 10], [10, 11], [11, 12], [12, 13], [13, 14], [14, 15], [15, 16], [16, 17]], "Barack Obama": [[7, 21], [21, 22]], "Centers for Medicare and Medicaid Services": [[18, 19], [19, 12], [12, 13], [13, 20]], "Janet Yellen": [[28, 29], [29, 30]], "DHS": [[23, 24], [24, 25]], "Russia": [[0, 26], [26, 27], [27, 10], [10, 11], [11, 14], [14, 16]], "James Comey": [[7, 8], [8, 9], [9, 16]], "Federal Bureau of Investigation": [[7, 0], [0, 8], [8, 9], [9, 14], [14, 16]]};
var graph = {
    "nodes": [{"data": {"img": "https://i.guim.co.uk/img/media/d4be646391d0fa1c2e64f06b2b2a6530546e0a80/0_128_4500_2699/master/4500.jpg?w=1200&h=630&q=55&auto=format&usm=12&fit=crop&crop=faces%2Centropy&bm=normal&ba=bottom%2Cleft&blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&s=eaae35585d5686acb8af6e2f67fe0013", "title": "The Guardian view of Trump\u2019s Russia links: a lot to go at", "url": "https://www.theguardian.com/commentisfree/2017/mar/20/the-guardian-view-of-trumps-russia-links-a-lot-to-go-at", "summary": "Why days before the presidential election did the FBI announce it was reopening an investigation into Hillary Clinton \u2013 when it was silent about its probe into Mr Trump\u2019s Russia ties?", "html": "Why days before the presidential election did the FBI announce it was reopening an investigation into Hillary Clinton \u2013 when it was silent about its probe into Mr Trump\u2019s Russia ties?<br/><br/><a href='https://www.theguardian.com/commentisfree/2017/mar/20/the-guardian-view-of-trumps-russia-links-a-lot-to-go-at'>Read more at US news | The Guardian</a>", "date": 1490041046000.0}, "terminus": true, "lines": ["White House", "Federal Bureau of Investigation", "Russia"], "name": "The Guardian view of Trump\u2019s Russia links: a lot to go at"}, {"data": {"img": "https://i.guim.co.uk/img/media/b430a04f8512dd41d9e9853c40a587cbf44e411d/0_139_3000_1800/master/3000.jpg?w=1200&h=630&q=55&auto=format&usm=12&fit=crop&crop=faces%2Centropy&bm=normal&ba=bottom%2Cleft&blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&s=f9baf525429dde70ba3c296bb8f640c7", "title": "Ivanka Trump's expanded White House role raises ethical issues", "url": "https://www.theguardian.com/us-news/2017/mar/21/ivanka-trump-white-house-office-administration-role-ethics", "summary": "With a West Wing office but no specific title \u2013 and no precedent for adult children whose father is president \u2013 the rules Trump is subject to are under dispute", "html": "With a West Wing office but no specific title \u2013 and no precedent for adult children whose father is president \u2013 the rules Trump is subject to are under dispute<br/><br/><a href='https://www.theguardian.com/us-news/2017/mar/21/ivanka-trump-white-house-office-administration-role-ethics'>Read more at US news | The Guardian</a>", "date": 1490124094000.0}, "terminus": false, "lines": ["White House"], "name": "Ivanka Trump's expanded White House role raises ethical issues"}, {"data": {"img": "https://i.guim.co.uk/img/media/3dfedc4948b1c6d50cf85364cd04f03ccfb70635/0_69_594_356/master/594.jpg?w=1200&h=630&q=55&auto=format&usm=12&fit=crop&crop=faces%2Centropy&bm=normal&ba=bottom%2Cleft&blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&s=80948b33e10cc87eb32ceac2e0bc70e1", "title": "Leader of group widely identified as anti-Muslim meets with White House", "url": "https://www.theguardian.com/us-news/2017/mar/21/act-for-america-brigitte-gabriel-muslim-white-house-meeting", "summary": "Brigitte Gabriel of Act for America, which has been classified as a hate group, posted photos from her visit and asked supporters what topics to address", "html": "Brigitte Gabriel of Act for America, which has been classified as a hate group, posted photos from her visit and asked supporters what topics to address<br/><br/><a href='https://www.theguardian.com/us-news/2017/mar/21/act-for-america-brigitte-gabriel-muslim-white-house-meeting'>Read more at US news | The Guardian</a>", "date": 1490145085000.0}, "terminus": true, "lines": ["White House"], "name": "Leader of group widely identified as anti-Muslim meets with White House"}, {"data": {"img": "https://i.guim.co.uk/img/media/0da35e5e2368fa4160636eb1571524dcc59670b3/0_226_3648_2187/master/3648.jpg?w=1200&h=630&q=55&auto=format&usm=12&fit=crop&crop=faces%2Centropy&bm=normal&ba=bottom%2Cleft&blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&s=d76fb6ed420c530aaa214a29bc0e8956", "title": "Bastian Schweinsteiger joins Chicago Fire from Manchester United", "url": "https://www.theguardian.com/football/2017/mar/21/bastian-schweinsteiger-chicago-fire-manchester-united", "summary": "The former Germany midfielder has left to play in the MLS after being sidelined at Old Trafford", "html": "The former Germany midfielder has left to play in the MLS after being sidelined at Old Trafford<br/><br/><a href='https://www.theguardian.com/football/2017/mar/21/bastian-schweinsteiger-chicago-fire-manchester-united'>Read more at US news | The Guardian</a>", "date": 1490084699000.0}, "terminus": true, "lines": ["Bastian Schweinsteiger"], "name": "Bastian Schweinsteiger joins Chicago Fire from Manchester United"}, {"data": {"img": "https://i.guim.co.uk/img/media/c010ce2fc3751d642c510c9d33d5778757767435/0_207_3500_2100/master/3500.jpg?w=1200&h=630&q=55&auto=format&usm=12&fit=crop&crop=faces%2Centropy&bm=normal&ba=bottom%2Cleft&blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&s=c1b941fa413d3a72734f0c5aea4f3b20", "title": "Bastian Schweinsteiger leaves Manchester United for Chicago Fire \u2013 video report", "url": "https://www.theguardian.com/football/video/2017/mar/21/bastian-schweinsteiger-leaves-manchester-united-for-chicago-fire-video-report", "summary": "Midfielder Bastian Schweinsteiger is leaving Manchester United to join Major League Soccer side Chicago Fire in a one-year deal reportedly worth \u00a33.6m", "html": "Midfielder Bastian Schweinsteiger is leaving Manchester United to join Major League Soccer side Chicago Fire in a one-year deal reportedly worth \u00a33.6m<br/><br/><a href='https://www.theguardian.com/football/video/2017/mar/21/bastian-schweinsteiger-leaves-manchester-united-for-chicago-fire-video-report'>Read more at US news | The Guardian</a>", "date": 1490108980000.0}, "terminus": false, "lines": ["Bastian Schweinsteiger"], "name": "Bastian Schweinsteiger leaves Manchester United for Chicago Fire \u2013 video report"}, {"data": {"img": "https://i.guim.co.uk/img/media/b0182000823e431b8128fa821702e1a7185b8ed8/0_77_5520_3314/master/5520.jpg?w=1200&h=630&q=55&auto=format&usm=12&fit=crop&crop=faces%2Centropy&bm=normal&ba=bottom%2Cleft&blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&s=5ebaa6e0600235764d761148282f1146", "title": "Schweinsteiger signing does little to dispel view of MLS as retirement home", "url": "https://www.theguardian.com/football/2017/mar/22/bastian-schweinsteiger-chicago-fire-bad-fit", "summary": "Kristan Heneage: The Fire\u2019s $4.5m move for the former German international seems to share many parallels with ill-fated veteran signings of the past", "html": "Kristan Heneage: The Fire\u2019s $4.5m move for the former German international seems to share many parallels with ill-fated veteran signings of the past<br/><br/><a href='https://www.theguardian.com/football/2017/mar/22/bastian-schweinsteiger-chicago-fire-bad-fit'>Read more at US news | The Guardian</a>", "date": 1490173230000.0}, "terminus": true, "lines": ["Bastian Schweinsteiger"], "name": "Schweinsteiger signing does little to dispel view of MLS as retirement home"}, {"data": {"img": "https://i.guim.co.uk/img/media/5cc0be80bb0803c6eeec645a6b7fb35bcf9ebf0a/0_0_1300_780/master/1300.jpg?w=1200&h=630&q=55&auto=format&usm=12&fit=crop&crop=faces%2Centropy&bm=normal&ba=bottom%2Cleft&blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&s=4cd4e21dab6e1a517746e625717f1fc7", "title": "Donald Trump's first 100 days as president \u2013 daily updates", "url": "https://www.theguardian.com/us-news/ng-interactive/2017/jan/20/donald-trump-first-100-days-president-daily-updates", "summary": "Follow daily updates on the 45th president of the United States as we track Trump one day at a time", "html": "Follow daily updates on the 45th president of the United States as we track Trump one day at a time<br/><br/><a href='https://www.theguardian.com/us-news/ng-interactive/2017/jan/20/donald-trump-first-100-days-president-daily-updates'>Read more at US news | The Guardian</a>", "date": 1490010270000.0}, "terminus": true, "lines": ["Donald Trump"], "name": "Donald Trump's first 100 days as president \u2013 daily updates"}, {"data": {"img": "https://i.guim.co.uk/img/media/c9fd67695901b6ecfafbe8dc1eb613b2f2770643/0_58_5807_3483/master/5807.jpg?w=1200&h=630&q=55&auto=format&usm=12&fit=crop&crop=faces%2Centropy&bm=normal&ba=bottom%2Cleft&blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&s=c5c3701a8aa576716f1e19186bf13ea1", "title": "No evidence of Trump wiretapping claim, says FBI director \u2013 video", "url": "https://www.theguardian.com/us-news/video/2017/mar/20/fbi-director-james-comey-no-evidence-trump-wiretapping-claim-video", "summary": "James Comey says that neither the Department of Justice nor his own agency had evidence to support a claim that Trump Tower had been wiretapped", "html": "James Comey says that neither the Department of Justice nor his own agency had evidence to support a claim that Trump Tower had been wiretapped<br/><br/><a href='https://www.theguardian.com/us-news/video/2017/mar/20/fbi-director-james-comey-no-evidence-trump-wiretapping-claim-video'>Read more at US news | The Guardian</a>", "date": 1490028354000.0}, "terminus": true, "lines": ["Donald Trump", "Barack Obama", "Federal Bureau of Investigation", "James Comey"], "name": "No evidence of Trump wiretapping claim, says FBI director \u2013 video"}, {"data": {"img": "https://i.guim.co.uk/img/media/f6c9dc75d010bdfadb1c0a1763ce586161b5a470/0_194_5472_3283/master/5472.jpg?w=1200&h=630&q=55&auto=format&usm=12&fit=crop&crop=faces%2Centropy&bm=normal&ba=bottom%2Cleft&blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&s=de4311450f51d79d521b2c588d707512", "title": "Trump's false tweets on Russia corrected live at hearing \u2013 video", "url": "https://www.theguardian.com/global/video/2017/mar/20/russia-election-hearing-trump-tweets-video", "summary": "Trump\u2019s inaccurate tweets about a congressional hearing on Russia\u2019s alleged influence in the US elections were corrected in real time \u2014 at the hearing", "html": "Trump\u2019s inaccurate tweets about a congressional hearing on Russia\u2019s alleged influence in the US elections were corrected in real time \u2014 at the hearing<br/><br/><a href='https://www.theguardian.com/global/video/2017/mar/20/russia-election-hearing-trump-tweets-video'>Read more at US news | The Guardian</a>", "date": 1490041131000.0}, "terminus": false, "lines": ["Donald Trump", "Federal Bureau of Investigation", "James Comey"], "name": "Trump's false tweets on Russia corrected live at hearing \u2013 video"}, {"data": {"img": "https://i.guim.co.uk/img/media/bfebf30911446a289e7959eebcb294dc77279c68/0_288_4726_2836/master/4726.jpg?w=1200&h=630&q=55&auto=format&usm=12&fit=crop&crop=faces%2Centropy&bm=normal&ba=bottom%2Cleft&blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&s=d4df16603f01ee8bab7e9f4dd3ebc941", "title": "What we learned from the hearing on the Trump campaign's Russia ties", "url": "https://www.theguardian.com/us-news/2017/mar/20/trump-campaign-russia-hearing-key-points", "summary": "FBI director James Comey confirmed investigation began in July while NSA\u2019s Michael Rogers said baseless spying claim has strained UK relations", "html": "FBI director James Comey confirmed investigation began in July while NSA\u2019s Michael Rogers said baseless spying claim has strained UK relations<br/><br/><a href='https://www.theguardian.com/us-news/2017/mar/20/trump-campaign-russia-hearing-key-points'>Read more at US news | The Guardian</a>", "date": 1490058139000.0}, "terminus": false, "lines": ["Donald Trump", "Federal Bureau of Investigation", "James Comey"], "name": "What we learned from the hearing on the Trump campaign's Russia ties"}, {"data": {"img": "https://i.guim.co.uk/img/media/f4775cca286bc8069ff6472c7386b5d64aa2756d/0_156_3990_2394/master/3990.jpg?w=1200&h=630&q=55&auto=format&usm=12&fit=crop&crop=faces%2Centropy&bm=normal&ba=bottom%2Cleft&blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&s=55ea89b71a198dae328cc1aadbe0d107", "title": "Trump stays silent on FBI's Russia investigation at Kentucky rally", "url": "https://www.theguardian.com/us-news/2017/mar/20/trump-kentucky-rally-fbi-russia-investigation-james-comey", "summary": "The president spoke of NFL quarterbacks and healthcare reform but failed to mention James Comey\u2019s testimony to Congress earlier in the day", "html": "The president spoke of NFL quarterbacks and healthcare reform but failed to mention James Comey\u2019s testimony to Congress earlier in the day<br/><br/><a href='https://www.theguardian.com/us-news/2017/mar/20/trump-kentucky-rally-fbi-russia-investigation-james-comey'>Read more at US news | The Guardian</a>", "date": 1490060316000.0}, "terminus": false, "lines": ["Donald Trump", "Russia"], "name": "Trump stays silent on FBI's Russia investigation at Kentucky rally"}, {"data": {"img": "https://i.guim.co.uk/img/media/fcba433174302e3a297cc30765c120f1010d17e3/0_0_3708_2225/master/3708.jpg?w=1200&h=630&q=55&auto=format&usm=12&fit=crop&crop=faces%2Centropy&bm=normal&ba=bottom%2Cleft&blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&s=bb859b2b8b79d7394d122ffaa13729af", "title": "No, over there! Our case-by-case guide to the Trump distraction technique", "url": "https://www.theguardian.com/us-news/2017/mar/21/donald-trump-distraction-technique-media", "summary": "Some sort of problem rocking your presidency? Simple \u2013 create a distraction! Adam Gabbatt explores Donald Trump\u2019s apparent skills at changing the news", "html": "Some sort of problem rocking your presidency? Simple \u2013 create a distraction! Adam Gabbatt explores Donald Trump\u2019s apparent skills at changing the news<br/><br/><a href='https://www.theguardian.com/us-news/2017/mar/21/donald-trump-distraction-technique-media'>Read more at US news | The Guardian</a>", "date": 1490083200000.0}, "terminus": false, "lines": ["Donald Trump", "Russia"], "name": "No, over there! Our case-by-case guide to the Trump distraction technique"}, {"data": {"img": "https://i.guim.co.uk/img/media/b2ad45fee571dbd948bc0a378c555121d0684f49/0_186_3000_1800/master/3000.jpg?w=1200&h=630&q=55&auto=format&usm=12&fit=crop&crop=faces%2Centropy&bm=normal&ba=bottom%2Cleft&blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&s=6f7c6974888baca9376df9a26d38f570", "title": "Trump twists arms on Capitol Hill as House Republicans waver on healthcare", "url": "https://www.theguardian.com/us-news/2017/mar/21/trump-healthcare-congress-republicans", "summary": "Paul Ryan claimed president\u2019s pitch will \u2018close the deal\u2019 for Thursday\u2019s vote but Freedom Caucus chairman said there is \u2018more than enough\u2019 opposition to block", "html": "Paul Ryan claimed president\u2019s pitch will \u2018close the deal\u2019 for Thursday\u2019s vote but Freedom Caucus chairman said there is \u2018more than enough\u2019 opposition to block<br/><br/><a href='https://www.theguardian.com/us-news/2017/mar/21/trump-healthcare-congress-republicans'>Read more at US news | The Guardian</a>", "date": 1490113175000.0}, "terminus": false, "lines": ["Donald Trump", "Centers for Medicare and Medicaid Services"], "name": "Trump twists arms on Capitol Hill as House Republicans waver on healthcare"}, {"data": {"img": "https://i.guim.co.uk/img/media/3d54c2b0a5b431a7c5d7b50bd97c8ce6e9018c18/0_134_3500_2101/master/3500.jpg?w=1200&h=630&q=55&auto=format&usm=12&fit=crop&crop=faces%2Centropy&bm=normal&ba=bottom%2Cleft&blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&s=0498010f802e06874f9e4121509e2c80", "title": "Louisville loyalists lap up Trump line on healthcare but Congress is a harder sell", "url": "https://www.theguardian.com/us-news/2017/mar/21/trump-lousville-kentucky-rally-healthcare", "summary": "Kentucky, where the president held a rally for 18,000 people, has done well out of Obamacare and is home to a Republican senator fighting the bill to replace it", "html": "Kentucky, where the president held a rally for 18,000 people, has done well out of Obamacare and is home to a Republican senator fighting the bill to replace it<br/><br/><a href='https://www.theguardian.com/us-news/2017/mar/21/trump-lousville-kentucky-rally-healthcare'>Read more at US news | The Guardian</a>", "date": 1490118790000.0}, "terminus": false, "lines": ["Donald Trump", "Centers for Medicare and Medicaid Services"], "name": "Louisville loyalists lap up Trump line on healthcare but Congress is a harder sell"}, {"data": {"img": "https://i.guim.co.uk/img/media/bc8d1362624c4781bde5df889181a046f8f9fe1f/0_202_2200_1319/master/2200.jpg?w=1200&h=630&q=55&auto=format&usm=12&fit=crop&crop=faces%2Centropy&bm=normal&ba=bottom%2Cleft&blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&s=e3314b60383adfe5e3fb6fc7f6d75476", "title": "What is James Comey\u2019s game? The media must expose the truth together", "url": "https://www.theguardian.com/commentisfree/2017/mar/21/james-comey-media-hillary-clinton-emails-fbi-donald-trump-russia", "summary": "Why did Hillary Clinton\u2019s emails supposedly warrant an FBI intervention in the election campaign, yet Donald Trump\u2019s Russian connections didn\u2019t?", "html": "Why did Hillary Clinton\u2019s emails supposedly warrant an FBI intervention in the election campaign, yet Donald Trump\u2019s Russian connections didn\u2019t?<br/><br/><a href='https://www.theguardian.com/commentisfree/2017/mar/21/james-comey-media-hillary-clinton-emails-fbi-donald-trump-russia'>Read more at US news | The Guardian</a>", "date": 1490120760000.0}, "terminus": false, "lines": ["Donald Trump", "Federal Bureau of Investigation", "Russia"], "name": "What is James Comey\u2019s game? The media must expose the truth together"}, {"data": {"img": "https://i.guim.co.uk/img/media/9ddffc13603b5f4ddf257fe4c8e7023f323bb208/443_408_2597_1558/master/2597.jpg?w=1200&h=630&q=55&auto=format&usm=12&fit=crop&crop=faces%2Centropy&bm=normal&ba=bottom%2Cleft&blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&s=801ff9584538b215f40582694a8b1521", "title": "Will Trump be impeached \u2013 or is it just a liberal fantasy?", "url": "https://www.theguardian.com/us-news/2017/mar/22/donald-trump-president-impeached-liberals-history-process", "summary": "Only two presidents in history have been impeached, but murmurs continue to surround Trump. Here\u2019s how the process would work \u2013 if it would at all", "html": "Only two presidents in history have been impeached, but murmurs continue to surround Trump. Here\u2019s how the process would work \u2013 if it would at all<br/><br/><a href='https://www.theguardian.com/us-news/2017/mar/22/donald-trump-president-impeached-liberals-history-process'>Read more at US news | The Guardian</a>", "date": 1490167819000.0}, "terminus": false, "lines": ["Donald Trump"], "name": "Will Trump be impeached \u2013 or is it just a liberal fantasy?"}, {"data": {"img": "https://i.guim.co.uk/img/media/fb86c6dbed96b6b885ee8f5fbc1765d86f5c3d6e/0_127_3500_2100/master/3500.jpg?w=1200&h=630&q=55&auto=format&usm=12&fit=crop&crop=faces%2Centropy&bm=normal&ba=bottom%2Cleft&blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&s=623321fe5ec90c419ed2624347355dd8", "title": "Donald Trump is under investigation for ties to Russia. What happens now?", "url": "https://www.theguardian.com/us-news/2017/mar/21/fbi-trump-russia-house-intelligence-committee", "summary": "Monday\u2019s intelligence hearing highlighted the \u2018big gray cloud\u2019 of suspicion hanging over the White House. Here\u2019s what happened \u2013 and what to expect", "html": "Monday\u2019s intelligence hearing highlighted the \u2018big gray cloud\u2019 of suspicion hanging over the White House. Here\u2019s what happened \u2013 and what to expect<br/><br/><a href='https://www.theguardian.com/us-news/2017/mar/21/fbi-trump-russia-house-intelligence-committee'>Read more at US news | The Guardian</a>", "date": 1490167861000.0}, "terminus": true, "lines": ["Donald Trump", "Federal Bureau of Investigation", "Russia", "James Comey"], "name": "Donald Trump is under investigation for ties to Russia. What happens now?"}, {"data": {"img": "https://i.guim.co.uk/img/media/2f8595d5589314000b89bf8eac0bcb13d763d464/0_116_3500_2101/master/3500.jpg?w=1200&h=630&q=55&auto=format&usm=12&fit=crop&crop=faces%2Centropy&bm=normal&ba=bottom%2Cleft&blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&s=59bccf1b326287d28c8c81ca6671dd41", "title": "I was sent Donald Trump's 2005 tax return. We need the rest \u2013 right now", "url": "https://www.theguardian.com/commentisfree/2017/mar/22/donald-trumps-2005-tax-return-we-need-the-rest-right-now", "summary": "Only the full release of his tax records can help shed light on whether Trump is a crook \u2013 or compromised", "html": "Only the full release of his tax records can help shed light on whether Trump is a crook \u2013 or compromised<br/><br/><a href='https://www.theguardian.com/commentisfree/2017/mar/22/donald-trumps-2005-tax-return-we-need-the-rest-right-now'>Read more at US news | The Guardian</a>", "date": 1490176832000.0}, "terminus": true, "lines": ["Donald Trump"], "name": "I was sent Donald Trump's 2005 tax return. We need the rest \u2013 right now"}, {"data": {"img": "https://i.guim.co.uk/img/media/6e1dd804d8c42e1d976c3f72cb8cf14034caabba/0_218_4256_2553/master/4256.jpg?w=1200&h=630&q=55&auto=format&usm=12&fit=crop&crop=faces%2Centropy&bm=normal&ba=bottom%2Cleft&blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&s=835c07f2ac726bfc942d93a14e625c6a", "title": "Trump supporters in the heartland fear being left behind by GOP health plan", "url": "https://www.theguardian.com/us-news/2017/mar/12/republican-healthcare-trump-pence-medicaid-indiana", "summary": "Republican proposal would upend a healthcare system in Indiana that covers many low-income people \u2013 in a program that Mike Pence put in place", "html": "Republican proposal would upend a healthcare system in Indiana that covers many low-income people \u2013 in a program that Mike Pence put in place<br/><br/><a href='https://www.theguardian.com/us-news/2017/mar/12/republican-healthcare-trump-pence-medicaid-indiana'>Read more at US news | The Guardian</a>", "date": 1489316401000.0}, "terminus": true, "lines": ["Centers for Medicare and Medicaid Services"], "name": "Trump supporters in the heartland fear being left behind by GOP health plan"}, {"data": {"img": "https://i.guim.co.uk/img/media/e9dacd45416998969ec59ae5aa03b395f9c66d09/0_177_3500_2100/master/3500.jpg?w=1200&h=630&q=55&auto=format&usm=12&fit=crop&crop=faces%2Centropy&bm=normal&ba=bottom%2Cleft&blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&s=84378ddb12a9d7d3cceae69f5b530c4c", "title": "Republicans unveil make-or-break bid to repeal and replace Obamacare", "url": "https://www.theguardian.com/us-news/2017/mar/21/republicans-unveil-make-or-break-bid-to-repeal-and-replace-obamacare", "summary": "Revisions offer more generous tax credits for older people, earlier repeal of tax increases on higher earners and hand Medicaid powers to states", "html": "Revisions offer more generous tax credits for older people, earlier repeal of tax increases on higher earners and hand Medicaid powers to states<br/><br/><a href='https://www.theguardian.com/us-news/2017/mar/21/republicans-unveil-make-or-break-bid-to-repeal-and-replace-obamacare'>Read more at US news | The Guardian</a>", "date": 1490070527000.0}, "terminus": false, "lines": ["Centers for Medicare and Medicaid Services"], "name": "Republicans unveil make-or-break bid to repeal and replace Obamacare"}, {"data": {"img": "https://i.guim.co.uk/img/media/36352c43bf8fd2bfcf1681209090363cbd519131/0_0_3000_1800/master/3000.jpg?w=1200&h=630&q=55&auto=format&usm=12&fit=crop&crop=faces%2Centropy&bm=normal&ba=bottom%2Cleft&blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&s=0ff8a513f37bafd474abcbbabaa0842d", "title": "24 hours in a Detroit ER: on the frontline of America's healthcare debate", "url": "https://www.theguardian.com/us-news/2017/mar/22/detroit-us-healthcare-henry-ford-hospital", "summary": "Henry Ford hospital is one of the busiest in Michigan, and with many patients on Medicare and Medicaid it stands to be impacted greatly by an Obamacare repeal. As the debate rages, one doctor remains the calm at the center of the storm", "html": "Henry Ford hospital is one of the busiest in Michigan, and with many patients on Medicare and Medicaid it stands to be impacted greatly by an Obamacare repeal. As the debate rages, one doctor remains the calm at the center of the storm<br/><br/><a href='https://www.theguardian.com/us-news/2017/mar/22/detroit-us-healthcare-henry-ford-hospital'>Read more at US news | The Guardian</a>", "date": 1490176832000.0}, "terminus": true, "lines": ["Centers for Medicare and Medicaid Services"], "name": "24 hours in a Detroit ER: on the frontline of America's healthcare debate"}, {"data": {"img": "https://i.guim.co.uk/img/media/5e28bf6cdeb5daa087d4000042c70b55d33b2ed9/0_94_4500_2700/master/4500.jpg?w=1200&h=630&q=55&auto=format&usm=12&fit=crop&crop=faces%2Centropy&bm=normal&ba=bottom%2Cleft&blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&s=893367b575b1ff2fb7058140ecc02b9a", "title": "Trump must convert surging US confidence into real growth", "url": "https://www.theguardian.com/business/2017/mar/20/why-surge-positive-us-business-thinking-not-good-thing-truimp-markets-mohamed-el-erian", "summary": "The exuberant market reaction to his win has not been translated into progress \u2013 he must work with Congress to deliver", "html": "The exuberant market reaction to his win has not been translated into progress \u2013 he must work with Congress to deliver<br/><br/><a href='https://www.theguardian.com/business/2017/mar/20/why-surge-positive-us-business-thinking-not-good-thing-truimp-markets-mohamed-el-erian'>Read more at US news | The Guardian</a>", "date": 1490040590000.0}, "terminus": false, "lines": ["Barack Obama"], "name": "Trump must convert surging US confidence into real growth"}, {"data": {"img": "https://i.guim.co.uk/img/media/91946604f48ad59eff8ade36b61dfe00ec03bb3f/37_0_3426_2056/master/3426.jpg?w=1200&h=630&q=55&auto=format&usm=12&fit=crop&crop=faces%2Centropy&bm=normal&ba=bottom%2Cleft&blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&s=cc2b04d7f0d84befe3b1796330161033", "title": "US diplomacy in crisis amid cuts and confusion at state department", "url": "https://www.theguardian.com/us-news/2017/mar/22/us-diplomacy-in-crisis-amid-cuts-and-confusion-at-state-department", "summary": "Critics says America\u2019s soft power could be dramatically diluted if it does not find a way to stop alienating allies around the world", "html": "Critics says America\u2019s soft power could be dramatically diluted if it does not find a way to stop alienating allies around the world<br/><br/><a href='https://www.theguardian.com/us-news/2017/mar/22/us-diplomacy-in-crisis-amid-cuts-and-confusion-at-state-department'>Read more at US news | The Guardian</a>", "date": 1490178632000.0}, "terminus": true, "lines": ["Barack Obama"], "name": "US diplomacy in crisis amid cuts and confusion at state department"}, {"data": {"img": "https://i.guim.co.uk/img/media/af639337d0a1db38a318b56b5ae556b195595b1d/0_49_3780_2268/master/3780.jpg?w=1200&h=630&q=55&auto=format&usm=12&fit=crop&crop=faces%2Centropy&bm=normal&ba=bottom%2Cleft&blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&s=0f1a8fa87653b0c6e26c7a3d8b35d7f1", "title": "US bans larger electronic devices on some flights from Middle East", "url": "https://www.theguardian.com/business/2017/mar/20/us-forbids-devices-larger-cell-phones-flights-13-countries", "summary": "New TSA requirement blocks passengers from bringing laptops, iPads, Kindles and cameras, with a lack of specifics on whether flight crews are included in rule", "html": "New TSA requirement blocks passengers from bringing laptops, iPads, Kindles and cameras, with a lack of specifics on whether flight crews are included in rule<br/><br/><a href='https://www.theguardian.com/business/2017/mar/20/us-forbids-devices-larger-cell-phones-flights-13-countries'>Read more at US news | The Guardian</a>", "date": 1490040827000.0}, "terminus": true, "lines": ["DHS"], "name": "US bans larger electronic devices on some flights from Middle East"}, {"data": {"img": "https://i.guim.co.uk/img/media/932e9cf360a08c601c5b7f24597db2092c877be8/0_0_5616_3370/master/5616.jpg?w=1200&h=630&q=55&auto=format&usm=12&fit=crop&crop=faces%2Centropy&bm=normal&ba=bottom%2Cleft&blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&s=02ff6351146c385ff888d551f963e64f", "title": "Experts criticize US electronic devices ban on some flights from Middle East", "url": "https://www.theguardian.com/us-news/2017/mar/21/us-electronic-devices-ban-flights-tsa-airports", "summary": "Technologists say new rules against electronics \u2018larger than a cellphone\u2019 on flights from 10 airports seem illogical and at odds with basic computer science", "html": "Technologists say new rules against electronics \u2018larger than a cellphone\u2019 on flights from 10 airports seem illogical and at odds with basic computer science<br/><br/><a href='https://www.theguardian.com/us-news/2017/mar/21/us-electronic-devices-ban-flights-tsa-airports'>Read more at US news | The Guardian</a>", "date": 1490102148000.0}, "terminus": false, "lines": ["DHS"], "name": "Experts criticize US electronic devices ban on some flights from Middle East"}, {"data": {"img": "https://i.guim.co.uk/img/media/3d495cd4188c6797db7e7b3dde9d9c053bef0f83/0_77_4128_2477/master/4128.jpg?w=1200&h=630&q=55&auto=format&usm=12&fit=crop&crop=faces%2Centropy&bm=normal&ba=bottom%2Cleft&blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&s=58ad63d29e3d7c5f4e9a12e3e23039fb", "title": "US electronics ban for Middle East flights endangers passengers for profit", "url": "https://www.theguardian.com/world/2017/mar/21/electronics-ban-middle-east-flights-safety-hazards-airline-profit", "summary": "Holding many large devices with lithium-ion batteries in cargo could create fire risk that has downed airplanes, as directive only affects foreign-owned carriers", "html": "Holding many large devices with lithium-ion batteries in cargo could create fire risk that has downed airplanes, as directive only affects foreign-owned carriers<br/><br/><a href='https://www.theguardian.com/world/2017/mar/21/electronics-ban-middle-east-flights-safety-hazards-airline-profit'>Read more at US news | The Guardian</a>", "date": 1490125507000.0}, "terminus": true, "lines": ["DHS"], "name": "US electronics ban for Middle East flights endangers passengers for profit"}, {"data": {"img": "https://i.guim.co.uk/img/media/a94bc6f622e70ec1eb039eb24a66179fd812d057/0_236_7212_4328/master/7212.jpg?w=1200&h=630&q=55&auto=format&usm=12&fit=crop&crop=faces%2Centropy&bm=normal&ba=bottom%2Cleft&blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&s=5582c7a507d3fa7078342b21eb227ba3", "title": "Russia hearing: Comey says no information to confirm Trump's wiretap claims \u2013 as it happened", "url": "https://www.theguardian.com/us-news/live/2017/mar/20/donald-trump-campaign-russia-fbi-nsa-live", "summary": "James Comey and Mike Rogers appear before the House intelligence panel while Trump\u2019s supreme court pick Neil Gorsuch has a confirmation hearing", "html": "James Comey and Mike Rogers appear before the House intelligence panel while Trump\u2019s supreme court pick Neil Gorsuch has a confirmation hearing<br/><br/><a href='https://www.theguardian.com/us-news/live/2017/mar/20/donald-trump-campaign-russia-fbi-nsa-live'>Read more at US news | The Guardian</a>", "date": 1490041682000.0}, "terminus": false, "lines": ["Russia"], "name": "Russia hearing: Comey says no information to confirm Trump's wiretap claims \u2013 as it happened"}, {"data": {"img": "https://i.guim.co.uk/img/media/46274421f2ee86fc56d2a6549024d168ebd49f83/0_182_4500_2700/master/4500.jpg?w=1200&h=630&q=55&auto=format&usm=12&fit=crop&crop=faces%2Centropy&bm=normal&ba=bottom%2Cleft&blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&s=9a7993656b6c44af0b53fb9ed61f2bf3", "title": "House committee grills Comey and Rogers on Trump and Russia: key points", "url": "https://www.theguardian.com/us-news/2017/mar/20/key-points-house-committee-hearing-trump-russia-comey", "summary": "FBI director confirms investigation of Trump campaign\u2019s ties to Russian government and smacks down several of the president\u2019s tweets", "html": "FBI director confirms investigation of Trump campaign\u2019s ties to Russian government and smacks down several of the president\u2019s tweets<br/><br/><a href='https://www.theguardian.com/us-news/2017/mar/20/key-points-house-committee-hearing-trump-russia-comey'>Read more at US news | The Guardian</a>", "date": 1490044233000.0}, "terminus": false, "lines": ["Russia"], "name": "House committee grills Comey and Rogers on Trump and Russia: key points"}, {"data": {"img": "https://i.guim.co.uk/img/media/686704ddde3fa3e383e36a491ab51cba26c00a7f/0_125_4792_2876/master/4792.jpg?w=1200&h=630&q=55&auto=format&usm=12&fit=crop&crop=faces%2Centropy&bm=normal&ba=bottom%2Cleft&blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&s=2a528dbbf18a2a0d9b38404695ea78b1", "title": "US interest rate rise signals end of ultra-low borrowing costs", "url": "https://www.theguardian.com/business/2017/mar/15/us-interest-rate-rise-borrowing-costs", "summary": "Fed boss Janet Yellen wants the rates to hit the new normal so expect two more hikes this year", "html": "Fed boss Janet Yellen wants the rates to hit the new normal so expect two more hikes this year<br/><br/><a href='https://www.theguardian.com/business/2017/mar/15/us-interest-rate-rise-borrowing-costs'>Read more at US news | The Guardian</a>", "date": 1489606285000.0}, "terminus": true, "lines": ["Janet Yellen"], "name": "US interest rate rise signals end of ultra-low borrowing costs"}, {"data": {"img": "https://i.guim.co.uk/img/media/9b4795582f473e5c8fdc3ca2409f4fabdfdd464b/0_809_2616_1569/master/2616.jpg?w=1200&h=630&q=55&auto=format&usm=12&fit=crop&crop=faces%2Centropy&bm=normal&ba=bottom%2Cleft&blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&s=426c9153419af37c4da51e87eceecdf9", "title": "Federal Reserve chair Janet Yellen announces an interest rate increase \u2013 video", "url": "https://www.theguardian.com/business/video/2017/mar/15/federal-reserve-chair-janet-yellen-interest-rates-video", "summary": "Federal Reserve chair Janet Yellen announces that the Federal Reserve would raise interest rates on Wednesday", "html": "Federal Reserve chair Janet Yellen announces that the Federal Reserve would raise interest rates on Wednesday<br/><br/><a href='https://www.theguardian.com/business/video/2017/mar/15/federal-reserve-chair-janet-yellen-interest-rates-video'>Read more at US news | The Guardian</a>", "date": 1489611749000.0}, "terminus": false, "lines": ["Janet Yellen"], "name": "Federal Reserve chair Janet Yellen announces an interest rate increase \u2013 video"}, {"data": {"img": "https://i.guim.co.uk/img/media/ca97ce07edfbed55199496361959837a4b904fb3/0_510_3802_2281/master/3802.jpg?w=1200&h=630&q=55&auto=format&usm=12&fit=crop&crop=faces%2Centropy&bm=normal&ba=bottom%2Cleft&blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxNi8wNS8yNS9vdmVybGF5LWxvZ28tMTIwMC05MF9vcHQucG5n&s=33a66d92481375370712e77a3aa5c906", "title": "The Ronald, the Donald \u2013 and a hamstrung Hammond", "url": "https://www.theguardian.com/business/2017/mar/19/ronald-reagan-donald-trump-us-economics-hammond", "summary": "Though he talked tax cuts, Ronald Reagan in fact turned on the public spending taps, to great effect at home and harm abroad. But 2017 is hardly 1981", "html": "Though he talked tax cuts, Ronald Reagan in fact turned on the public spending taps, to great effect at home and harm abroad. But 2017 is hardly 1981<br/><br/><a href='https://www.theguardian.com/business/2017/mar/19/ronald-reagan-donald-trump-us-economics-hammond'>Read more at US news | The Guardian</a>", "date": 1489906741000.0}, "terminus": true, "lines": ["Janet Yellen"], "name": "The Ronald, the Donald \u2013 and a hamstrung Hammond"}] ,
    "links": [{"count": 1, "source": 0, "line": "White House", "target": 1}, {"count": 1, "source": 1, "line": "White House", "target": 2}, {"count": 1, "source": 3, "line": "Bastian Schweinsteiger", "target": 4}, {"count": 1, "source": 4, "line": "Bastian Schweinsteiger", "target": 5}, {"count": 1, "source": 6, "line": "Donald Trump", "target": 7}, {"count": 1, "source": 7, "line": "Donald Trump", "target": 8}, {"count": 1, "source": 8, "line": "Donald Trump", "target": 9}, {"count": 1, "source": 9, "line": "Donald Trump", "target": 10}, {"count": 1, "source": 10, "line": "Donald Trump", "target": 11}, {"count": 1, "source": 11, "line": "Donald Trump", "target": 12}, {"count": 1, "source": 12, "line": "Donald Trump", "target": 13}, {"count": 1, "source": 13, "line": "Donald Trump", "target": 14}, {"count": 1, "source": 14, "line": "Donald Trump", "target": 15}, {"count": 1, "source": 15, "line": "Donald Trump", "target": 16}, {"count": 1, "source": 16, "line": "Donald Trump", "target": 17}, {"count": 1, "source": 18, "line": "Centers for Medicare and Medicaid Services", "target": 19}, {"count": 1, "source": 19, "line": "Centers for Medicare and Medicaid Services", "target": 12}, {"count": 2, "source": 12, "line": "Centers for Medicare and Medicaid Services", "target": 13}, {"count": 1, "source": 13, "line": "Centers for Medicare and Medicaid Services", "target": 20}, {"count": 1, "source": 7, "line": "Barack Obama", "target": 21}, {"count": 1, "source": 21, "line": "Barack Obama", "target": 22}, {"count": 1, "source": 7, "line": "Federal Bureau of Investigation", "target": 0}, {"count": 1, "source": 0, "line": "Federal Bureau of Investigation", "target": 8}, {"count": 2, "source": 8, "line": "Federal Bureau of Investigation", "target": 9}, {"count": 1, "source": 9, "line": "Federal Bureau of Investigation", "target": 14}, {"count": 1, "source": 14, "line": "Federal Bureau of Investigation", "target": 16}, {"count": 1, "source": 23, "line": "DHS", "target": 24}, {"count": 1, "source": 24, "line": "DHS", "target": 25}, {"count": 1, "source": 0, "line": "Russia", "target": 26}, {"count": 1, "source": 26, "line": "Russia", "target": 27}, {"count": 1, "source": 27, "line": "Russia", "target": 10}, {"count": 2, "source": 10, "line": "Russia", "target": 11}, {"count": 1, "source": 11, "line": "Russia", "target": 14}, {"count": 2, "source": 14, "line": "Russia", "target": 16}, {"count": 2, "source": 7, "line": "James Comey", "target": 8}, {"count": 3, "source": 8, "line": "James Comey", "target": 9}, {"count": 1, "source": 9, "line": "James Comey", "target": 16}, {"count": 1, "source": 28, "line": "Janet Yellen", "target": 29}, {"count": 1, "source": 29, "line": "Janet Yellen", "target": 30}]
};

// Dates get serialised as plain ints
for (var n=0; n<graph.nodes.length;++n) {
  graph.nodes[n].data.date = new Date(graph.nodes[n].data.date);
}

// Keep a record of which links have multiple metro lines
var multiEdges = {};
for (var l of graph.links) {
  multiEdges[[graph.nodes[l.source], graph.nodes[l.target]]] = 
    Math.max(l.count, 
            multiEdges[[graph.nodes[l.source], 
            graph.nodes[l.target]]]||1);
}

// Helper functions for general station movement, calculation and manipulation
function isInterchange(d) { return d.lines.length > 1; }
function linelength(p1, p2){ return Math.sqrt(Math.pow(p1.x-p2.x,2) + Math.pow(p1.y-p2.y,2)); }
function nan(v) { return v !== v; }
function coordinates(p) { return JSON.stringify({x:Math.round(p.x, 2),y:Math.round(p.y, 2)}); }
function octilinear(p1, p2) {
  if (p1.y == p2.y) {
    return true;
  } else if (p1.x == p2.x) {
    return true;
  } else {
    return Math.abs((p2.x-p1.x)/(p2.y-p1.y)) < 0.1;
  }
}
function gradient(a, b){ return (b.py-a.py)/(b.px-a.px); }
function dist2d(a, b){ return {x: (b.px-a.px), y:(b.py-a.py)}; }

// All the d3 drawing stuff and main loop
var drawGraph = function (graph) {

  force.nodes(graph.nodes)
    .links(graph.links)
    .on("tick", function() {
        // Every tick, change the energy the map has to move relative to how "good"
        // its layout is. Bad graph => high energy to reposition, & vice versa.
        energy = Math.log(octilinearity())/10 + Math.log(lineStraightness())/10;
        force.alpha(energy);
        tick();
    })
    .start();

  // Create the metro line links
  var link = svg.selectAll(".link")
    .data(graph.links)
    .enter().append("path")
    .style("stroke", function(d) {
      return color(d.line); 
    })
    .style("stroke-width", function(d) {
      return 7; // Math.min(10, Math.floor(18/multiEdges[[d.source, d.target]])); 
    })
    .attr("class", function (d) {
      return "link count" + d.count;
    });
  
  // Bind the stations to their data
  var node = svg.selectAll(".node")
    .data(graph.nodes)
    .enter().append("g")
    .attr("class", "node")
    .on("click", function(d){
      // Reset all the circles
      var nodes = d3.selectAll(".node");
      nodes.each(function(d) { 
        d3.select(this).select("circle").transition().duration(250)
          .style("fill", isInterchange(d) ? "white" : color(d.lines[0]))
        });
        d3.select(this).select("circle").transition().duration(250)
        .style("fill", "black")
        // __.data__.data is not a d3 thing (the last .data element is ours and poorly named)
        showArticle(this.__data__.data);
      })
    .call(force.drag);

  // Create the station tooltips
  node.append("title").text(function(d) { return d.name; });

  // Add the station circles and conditionally colour
  node.append("circle")
  .attr("r", function (d) {
    return isInterchange(d)? radius(4): radius(1);
  })
  .style("stroke", function (d) {
      return isInterchange(d) ? "black" : color(d.lines[0]);
  })
  .style("fill", function (d) {
      return isInterchange(d) ? "white" : color(d.lines[0]);
  });

  // Animate.. lots
  function tick() {

    function multiTranslate(targetDistance, point0, point1) {
    // This function is taken from http://webiks.com/d3-js-force-layout-straight-parallel-links/
      var x1_x0 = point1.x - point0.x,
          y1_y0 = point1.y - point0.y,
          x2_x0, y2_y0;
      if (y1_y0 === 0) {
          x2_x0 = 0;
          y2_y0 = targetDistance;
      } else {
          var angle = Math.atan((x1_x0) / (y1_y0));
          x2_x0 = -targetDistance * Math.cos(angle);
          y2_y0 = targetDistance * Math.sin(angle);
      }
      return {dx: x2_x0, dy: y2_y0};
    }

    // Change the angle and position of the links as they move
    link.attr("d", function (d) {
      var x1 = d.source.x, y1 = d.source.y,
          x2 = d.target.x, y2 = d.target.y,
          dr = 0;
          var lw = 7; //Math.min(7, Math.floor(18/multiEdges[[d.source, d.target]]));
          var offset = multiTranslate(d.count==1?0:(Math.floor(d.count/2))*(d.count%2?-lw:lw), d.source, d.target);
          x1 += offset.dx;
          x2 += offset.dx;
          y1 += offset.dy;
          y2 += offset.dy;
      return "M" + x1 + "," + y1 + "A" + dr + "," + dr + " 0 0,1 " + x2 + "," + y2; });

    // Change the position of the nodes as they move & don't let them go off canvas
    node.attr("transform", function (d) { return "translate(" + d.x + "," + d.y + ")"; });
        node
        .attr("cx", function(d) { return d.x = Math.max(10, Math.min(width-10, d.x)); }) 
        .attr("cy", function(d) { return d.y = Math.max(10, Math.min(height-10, d.y)); });

  // Draw the key & bind the click events
   var key = svg.selectAll(".key")
    .data(color.domain())
    .enter().append("g")
    .attr("class", "key")
    .attr("transform", function(d, i) { return "translate(0," + i * 25 + ")"; });
  key.append("rect")
    .attr("x", 20)
    .attr("y", 20)
    .attr("width", 50)
    .attr("height", 10)
    .attr("line", function(d) {return d;})
    .style("fill", color)
    .on('click', function(d) {isolateLine(d)});
  key.append("text")
    .attr("x", 75)
    .attr("y", 10)
    .attr("dy", 20)
    .text(function(d) { return d; }); 
  }
}

// Toggle the isolation of a single metro line when it's clicked in the key
function isolateLine(d) {
  var node = d3.selectAll(".node");
  var link = d3.selectAll(".link");
  // If no line is selected, isolate the line that was just clicked (d)
  if (iso_toggle==0) {
    var edges = metro_lines[d];
    node.transition().style("fill-opacity", function (o) {
        return o.lines.indexOf(d) > -1 || isInterchange(o)? 1 : 0.1;
    }).style("stroke-opacity", function (o) {
        return o.lines.indexOf(d) > -1 ? 1 : 0.05;
    }).duration(700);
    link.transition().style("opacity", function (o) {
        return o.line == d? 1 : 0.1;
    }).duration(700);
  } else { // Reset everything
    node.transition().duration(700).style("fill-opacity", 1).style("stroke-opacity", 1);
    link.transition().duration(700).style("opacity", 1);
  }
  force.start();
  force.tick(); // All the nodes are fixed so without calling tick(), start() won't work
  force.stop();
  iso_toggle = 1-iso_toggle;
}

// Let the nodes move around a bit and then forceably pause them
// To-do: polling until octilinearity/LS are suitably low, then doing force.alpha(0) breaks things
// but until then we have to have a hard time limit which performs badly sometimes
function move(time) {
  for (var n=0; n<graph.nodes.length; n++) {
    graph.nodes[n].fixed = false;
  }
  force.start();
  window.setTimeout(function(){
  // Wait some completely arbitraty amount of time before 'pausing'
    force.alpha(0);
    for (var n=0; n<graph.nodes.length; n++) {
      graph.nodes[n].fixed = true;
    }
  }, time);
};

// Still not sure whether it's correct to use .x or .px here, like, at all.
function getMetrics(graph, spacing) {
  var metrics = { x_min: width, x_max: 0,
                  y_min: height, y_max: 0,
                  x_avg: 0, y_avg: 0,
                  v_scale: 0, h_scale: 0 };

  metrics.x_min = Math.min.apply(null, graph.nodes.map(function(d) {return d.px;}));
  metrics.y_min = Math.min.apply(null, graph.nodes.map(function(d) {return d.py;}));
  metrics.x_max = Math.max.apply(null, graph.nodes.map(function(d) {return d.px;}));
  metrics.y_max = Math.max.apply(null, graph.nodes.map(function(d) {return d.py;}));

  metrics.x_avg = (metrics.x_min+metrics.x_max)/2.0;
  metrics.y_avg = (metrics.y_min+metrics.y_max)/2.0;

  metrics.v_scale = Math.abs(metrics.y_max - metrics.y_min)/(height-2*spacing);
  metrics.h_scale = Math.abs(metrics.x_max - metrics.x_min)/(height-2*spacing); // Deliberate
  metrics.x_move = (metrics.x_min*metrics.v_scale)/2.0;
  metrics.y_move = (metrics.y_min*metrics.h_scale)/2.0;

  return metrics;
}

function exportPositions() {
  positions = [];
  for (var n=0; n<graph.nodes.length; n++) {
    positions[n] = {"x": graph.nodes[n].x, "y": graph.nodes[n].y};
  }
  return JSON.stringify(positions);
}

function importPositions(positions) {
  for (var n=0; n<graph.nodes.length; n++) {
    graph.nodes[n].x = positions[n].x; graph.nodes[n].px = positions[n].x;
    graph.nodes[n].y = positions[n].y + 10; graph.nodes[n].py = positions[n].y + 10;
  }
  force.start();
  force.tick();
  force.stop();
}

function octilineariseLine(li, begin, end, dir) {
  let l = metro_lines[li];
  let line = {x: end.px-begin.px, y: end.py-begin.py};
  let theta = Math.atan(line.y/line.x);
  let nearest = Math.ceil(theta/(Math.PI/4)) * (Math.PI/4);
  if (dir == 1) { // line coming inwards, move 'begin'
    if (Math.round(Math.abs(nearest), 2) == 2 || nan(Math.tan(nearest))) {
      begin.py += linelength(begin, end);
    } else {
      begin.py += line.x * (Math.tan(nearest) - Math.tan(theta));
    }
  } else { // line going outwards, move 'end'
    if (Math.round(Math.abs(nearest), 2) == 2 || nan(Math.tan(nearest))) {
      end.py += linelength(begin, end);
    } else {
      end.py += line.x * (Math.tan(nearest) - Math.tan(theta));
    }
  }
  return {b:begin, e:end};
}

// start and stop are inclusive
function spaceAlongLine(l, start, stop, dir) {
  for (var n=0; n<graph.nodes.length; n++) {
    graph.nodes[n].px = graph.nodes[n].x;
    graph.nodes[n].py = graph.nodes[n].y;
  }
  var line = metro_lines[l];
  let real_begin = start==0? graph.nodes[line[0][0]]: graph.nodes[line[start-1][1]];
  let real_end = graph.nodes[line[stop-1][1]];
  oct = octilineariseLine(l, real_begin, real_end, dir);
  let begin = oct.b;
  let end = oct.e;
  
  let delta = dist2d(begin, end);
  delta.x = Math.ceil(delta.x/(stop-start+1));
  delta.x = (Math.abs(3*delta.x) < spacing)? delta.x*2: (Math.abs(delta.x)>spacing)? delta.x/1.5: delta.x;
  delta.y = Math.ceil(delta.y/(stop-start));
  delta.y = (Math.abs(3*delta.y) < spacing)? delta.y*2: (Math.abs(delta.y)>spacing)? delta.y/1.5: delta.y;

  for (var s=start; s<=stop; s++) {
    let station = s==0? graph.nodes[line[0][0]]: graph.nodes[line[s-1][1]];
    station.x = begin.px + (s-start)*delta.x;
    station.y = begin.py + (s-start)*delta.y;
    station.px = station.x;
    station.py = station.y;
  }
}

// Snap nodes to the grid so that hopefully most of them are drawn octilinearly
// in a discrete point space then do some line straightening and hope for the best
function snap(){
  force.stop();
  var metrics = getMetrics(graph, spacing);

  // This is the snap to grid part, we don't care about collisions yet so
  // don't mark anything as placed or unplaced
  for (var n=0; n<graph.nodes.length; n++) {
    let node = graph.nodes[n];
    node.x = (node.x/metrics.h_scale);
    node.y = (node.y/metrics.v_scale);
    c = { x: Math.ceil(node.x/spacing) * spacing,
          y: Math.ceil(node.y/spacing) * spacing};
    node.x = c.x; node.px = c.x;
    node.y = c.y; node.py = c.y;
  }

  metrics = getMetrics(graph, spacing);

  // We want to place stations in order of descending weight to keep the busy map sections clean
  var st = Object.keys(graph.nodes).sort(function(a,b){return graph.nodes[b].weight-graph.nodes[a].weight})
  // Try and place nodes if they can be snapped, otherwise nodes can bump each other off if they are closer
  for (var n of st) {
    let node = graph.nodes[n];
    node.x = (node.x) * (1.0/metrics.h_scale) - metrics.x_move;
    node.y = (node.y) * (1.0/metrics.v_scale) - metrics.y_move;

    c = { x: Math.ceil((node.x+metrics.x_avg)/spacing) * spacing,
          y: Math.ceil((node.y+metrics.y_avg)/spacing) * spacing};

    if (!taken[coordinates(c)]){
      taken[coordinates(c)] = node;
      node.placed = true;
      node.x, node.px = c.x, c.x;
      node.y, node.py = c.y, c.y;  
    } else if (taken[coordinates(c)] && dist2d(node, c) < dist2d(taken[coordinates(c)], c)) {
      let old = taken[coordinates(c)];
      old.placed = false;
      taken[coordinates(c)] = node;
      node.placed = true;
      node.x, node.px = c.x, c.x;
      node.y, node.py = c.y, c.y;
    }
  }

  // If we have: (a)  x  (c) [where ac is octilinear, and b has no other links]
  //               \     /
  //                \   /
  //                 (b) 
  // Transform this into: (a)--(b)--(c) [as long as x is not taken]

  for (var line in metro_lines) {
    line = metro_lines[line];
    for (var s=1; s<line.length; s++) {
      let a=graph.nodes[line[s-1][0]];
      let b=graph.nodes[line[s][0]];
      let c=graph.nodes[line[s][1]];
      let candidate = {x:(a.px+c.px)/2.0, y:(a.py+c.py)/2.0};

      if (octilinear(a, c) && b.weight <= 2 && !taken[coordinates(candidate)])  {
        taken[coordinates(b)] = false;
        taken[coordinates(candidate)] = b;
        b.x, b.px = candidate.x, candidate.x;
        b.y, b.py = candidate.y, candidate.y;
        b.placed = true;
      }
    }
  }
  // I'm not even sure why this is needed but like, it really is.
  for (var n=0; n<graph.nodes.length; n++) {
    graph.nodes[n].px = graph.nodes[n].x;
    graph.nodes[n].py = graph.nodes[n].y;
  }

  // If we have: (a)  x  (c) [where ac is octilinear, and b has no other links]
  //               \     /
  //                \   /
  //                 (b) 
  // Transform this into: (a)--(b)--(c) 
  // [EVEN IF x IS TAKEN OR B IS PLACED ALREADY]

  for (var line in metro_lines) {
    line = metro_lines[line];
    for (var s=line.length-1; s>0; s--) {
      let a=graph.nodes[line[s][1]];
      let b=graph.nodes[line[s-1][1]];
      let c=graph.nodes[line[s-1][0]];
      let candidate = {x:(a.px+c.px)/2.0, y:(a.py+c.py)/2.0};

      if (octilinear(a, c) && b.weight == 2)  {
        taken[coordinates(b)] = false;
        taken[coordinates(candidate)] = b;
        b.x = candidate.x; b.px = candidate.x;
        b.y = candidate.y; b.py = candidate.y;
        b.placed = true;
      }
    }
  }

  // If we have: (a)          [where b has not been placed]
  //               \     
  //                \   
  //                 (b)--(c) 
  //
  // Transform this into: (a)
  //                        \     
  //                        (b)
  //                          \
  //                          (c) 
  // [EVEN IF AC NOT OCTILINEAR OR B IS ON OTHER LINES]

  for (var line in metro_lines) {
  line = metro_lines[line];
    for (var s=1; s<line.length; s++) {
      let a=graph.nodes[line[s-1][0]];
      let b=graph.nodes[line[s][0]];
      let c=graph.nodes[line[s][1]];
      let candidate = {x:(a.px+c.px)/2.0, y:(a.py+c.py)/2.0}; 

      if (!b.placed)  {
        taken[coordinates(b)] = false;
        taken[coordinates(candidate)] = b;
        b.x, b.px = candidate.x, candidate.x;
        b.y, b.py = candidate.y, candidate.y;
        a.placed = true;
        b.placed = true;
        c.placed = true;
      }
    }
  }

  var metrics = getMetrics(graph, spacing);

  // We've moved around a lot so the map probably need rescaling & recentering
  for (var n=0; n<graph.nodes.length; n++) {
    let node = graph.nodes[n];
    node.x = (node.px) * (1.0/metrics.h_scale);
    node.y = (node.py) * (1.0/metrics.v_scale);
    node.px = node.x;
    node.py = node.y;
  }

  // Headcount; how many stations couldn't we place?
  taken = {};
  for (var n=0; n<graph.nodes.length; n++) {
    if (taken[coordinates(graph.nodes[n])]) {
      taken[coordinates(graph.nodes[n])] = 1;
    } else {
      taken[coordinates(graph.nodes[n])] = 1;
    }
  }
  force.start();
  console.debug("octilinearity:", octilinearity());
  console.debug("lineStraightness:", lineStraightness());
}

// This will fail if any link has the same source and target co-ordinates
var octilinearity = function(){
  var total = 0;
  for (var n=0; n<graph.links.length; n++) {
      let s = graph.links[n].source;
      let t = graph.links[n].target;
      let theta = 4*Math.atan(Math.abs((s.py-t.py)/(s.px-t.px)));
      total += Math.abs(Math.sin(theta));
    }
  return total;
}

// This will fail if basically any points are drawn on top of each other
var lineStraightness = function(){
  var total = 0;
  for (var line in metro_lines) {
    line = metro_lines[line];
    for (var s=0; s<line.length-1; s++) {
      let a = graph.nodes[line[s][0]];
      let b = graph.nodes[line[s+1][0]];
      let c = graph.nodes[line[s+1][1]];
      let v1 = {x:a.px - b.px, y:a.py - b.py};
      let v2 = {x:c.px - b.px, y:c.py - b.py};

      var v1mag = Math.sqrt(v1.x * v1.x + v1.y * v1.y);
      var v2mag =  Math.sqrt(v2.x * v2.x + v2.y * v2.y);
      var v1norm = {x:v1.x / v1mag, y:v1.y / v1mag};
      var v2norm = {x:v2.x / v2mag, y:v2.y / v2mag};
      
      var res = (v1norm.x * v2norm.x + v1norm.y * v2norm.y);
      // Make sure we don't NaN on e.g. acos(1.0000000000002)
      res = Math.round(res * 100) / 100;
      var theta = Math.acos(res);
      total+= theta;
    }
  }
  return total;
}

move(2000);
setTimeout(function(){
  snap(); 
}, 2500);

function timeSince(date) {
    var seconds = Math.floor((new Date() - date) / 1000);
    var interval = Math.floor(seconds / 31536000);

    if (interval > 1) {
        return interval + " years";
    }
    interval = Math.floor(seconds / 2592000);
    if (interval > 1) {
        return interval + " months";
    }
    interval = Math.floor(seconds / 86400);
    if (interval > 1) {
        return interval + " days";
    }
    interval = Math.floor(seconds / 3600);
    if (interval > 1) {
        return interval + " hours";
    }
    interval = Math.floor(seconds / 60);
    if (interval > 1) {
        return interval + " minutes";
    }
    return Math.floor(seconds) + " seconds";
}

function showArticle(data) {
  $('#article-container').get(0).innerHTML = "<h1>"+data.title+"</h1>"+"<h2>"+timeSince(data.date)+" ago</h2>"+ data.html;
    //`<h1>${data.title}</h1><h2>${data.date}</h2><img src='${data.img}'/>`
}

$('#graphPane').click(function() {
  $("#cards").hide();
  $('#feedPane').removeClass("active");
  $("#graph").show();
  $("#article-container").show();
  $("body")[0].style.overflow = "hidden";
  $('#graphPane').addClass("active");
});

$("#feedPane").click(function() {
  $("#graph").hide();
  $("#article-container").hide();
  $('#graphPane').removeClass("active");
  $("#cards").show();
  $("body")[0].style.overflow = "scroll";
  $('#feedPane').addClass("active");
});

 $("#graphPane").trigger("click");
drawGraph(graph);</script>
  </body>
</html>
